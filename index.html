<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>R Mini Course</title>
  <meta name="description" content="">
  <meta name="author" content="Nicole Kinlock">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="stylesheet" href="libraries/frameworks/revealjs/css/reveal.min.css">
  <link rel="stylesheet" href="libraries/frameworks/revealjs/css/theme/serif.css" id="theme">
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/zenburn.css" id="theme">
  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->  <link rel="stylesheet" href = "assets/css/custom.css">

</head>
<body>
  <div class="reveal">
    <div class="slides">
      <section class='' data-state='' id='slide-1'>
  <h2><b>R Mini Course</b></h2>
  <h3>Course developed by <a href = "http://mccannecology.weebly.com/">Mike McCann</a> (2015) and <a href = "http://benweinstein.weebly.com/">Ben Weinstein</a> (2014)</h3>

<h4><i>Nicole Kinlock</i></h4>

<h5>January 19th and 20th, 2017</h5>

</section>
<section class='seventy' data-state='' id='slide-2'>
  <h2>Directory</h2>
  <ul>
<li>Part 1: <a href = "#/2"> Basics of R </a></li>
<li>Part 2: <a href = "#/43"> Probability </a></li>
<li>Part 3: <a href = "#/62"> Data manipulation </a></li>
<li>Part 4: <a href = "#/95"> Looping and vectorization </a></li>
<li>Part 5: <a href = "#/131"> Functions </a></li>
<li>Part 6: <a href = "#/146"> Data visualization using ggplot2 </a></li>
</ul>

</section>
<section class='' data-state='' id='slide-3'>
  <h2><b>Part 1:</b> Basics of R</h2>
  <h5><a href = "#/1">Back to the directory</a></h5>

</section>
<section class='' data-state='noborder' id='slide-4'>
  <h2>Introduction to R</h2>
  <ul>
<li>Statistical programming language and environment</li>
<li>Available as public domain software <i>(i.e. not copyrighted)</i></li>
<li>Free!</li>
<li>Better than most commercial alternatives</li>
<li>Available on all platforms <i>(Windows, OSX, Linux)</i></li>
<li>Not just for statistics, but also general purpose programming</li>
</ul>

<p><img src = "https://www.r-project.org/Rlogo.png"></p>

</section>
<section class='' data-state='noborder' id='slide-5'>
  <h2>Why use R?</h2>
  <ul>
<li>Flexible</li>
<li>Transparent</li>
<li>Large user base</li>
<li>Valued skill <i>(Remember, R is a programming <b>language</b>)</i></li>
</ul>

</section>
<section class='' data-state='noborder' id='slide-6'>
  <h2>RStudio</h2>
  <ul>
<li>Integrated development environment (IDE) for the R language</li>
<li>AKA use R with a nice, shiny interface</li>
<li>Also free!</li>
<li>Using R without RStudio feels kind of like using only Command (Windows) or Terminal (Mac) on your computer </li>
</ul>

<p><img src = "http://www.rstudio.com/wp-content/uploads/2014/07/RStudio-Logo-Blue-Gradient.png" height = "150", width = "370"></p>

</section>
<section class='' data-state='noborder' id='slide-7'>
  <h2>Running R with RStudio</h2>
  <ul>
<li>The screen is split four ways: 

<ul>
<li><b>Workspace:</b> (Top left) Where scripts are written &amp; saved</li>
<li><b>Console:</b> (Bottom left) Where commands are run</li>
<li><b>Environment, History:</b> (Top right) Where objects are stored</li>
<li><b>Files, Plots, Packages, and Help:</b> (Bottom right) View data, help </li>
</ul></li>
</ul>

</section>
<section class='' data-state='' id='slide-8'>
  <h2>Running R with RStudio</h2>
  <ul>
<li><p>Type directly into the console (best when you don&#39;t want to save the code) or type into the script - then type <code>(CTRL + ENTER)</code> (Windows) or <code>(CMD + ENTER)</code> (Mac)</p></li>
<li><p>A <b>script</b> is a plain text file with R commands in it. This will be where you save the code that you are writing - the file will end in the extension <b>.R</b></p></li>
</ul>

</section>
<section class='' data-state='ninety' id='slide-9'>
  <h2>R as a calculator</h2>
  <ul>
<li><p>R has many <b>arithmetic</b> operators </p>

<ul>
<li><code>+</code>  Addition </li>
<li><code>-</code>  Subtraction </li>
<li><code>*</code>  Multiplication </li>
<li><code>/</code>  Division </li>
<li><code>^</code>  Exponentiation </li>
<li><code>%%</code> Modulus (finds remainder) </li>
<li><code>%/%</code> Integer division (leaves off remainder)</li>
</ul></li>
<li><p>R obeys the standard order of operations</p></li>
</ul>

</section>
<section class='' data-state='' id='slide-10'>
  <h2>R as a calculator</h2>
  <p>Examples</p>

<pre><code class="r">7 + 4
</code></pre>

<pre><code>## [1] 11
</code></pre>

<pre><code class="r">3^2
</code></pre>

<pre><code>## [1] 9
</code></pre>

<pre><code class="r">10 %% 7
</code></pre>

<pre><code>## [1] 3
</code></pre>

</section>
<section class='seventy' data-state='' id='slide-11'>
  <h2>R is logical</h2>
  <ul>
<li>R also has many <b>logical</b> operators 

<ul>
<li><code>&lt;</code>  Less than</li>
<li><code>&lt;=</code> Less than or equal to </li>
<li><code>&gt;</code>  Greater than</li>
<li><code>&gt;=</code> Greater than or equal to<br></li>
<li><code>==</code> Exactly equal to </li>
<li><code>!=</code> Not equal to </li>
<li><code>!</code>  NOT</li>
<li><code>|</code>  OR</li>
<li><code>&amp;</code>  AND</li>
</ul></li>
</ul>

</section>
<section class='' data-state='' id='slide-12'>
  <h2>R is logical</h2>
  <p>Examples</p>

<pre><code class="r">7 == 4
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">3 &gt; 2
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">7 != 4
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-13'>
  <h2>Try It!</h2>
  <ol>
<li><p>What is 21 multiplied by 342?</p></li>
<li><p>What is 15 to the fourth power?</p></li>
<li><p>Is 8 to the fifth power equal to the sum of 692 and 7500 multiplied by 4?</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-14'>
  <h2>Creating Objects</h2>
  <ul>
<li><p>An <b>object</b> is the fundamental unit in R. All expressions can be saved as an object.</p></li>
<li><p>To create an object from an expression we use the <b>assignment operator</b> (<code>&lt;-</code>). The assignment operator assigns values on the right to objects on the left.</p></li>
</ul>

<pre><code class="r">a &lt;- (12 + 180) * 3
a
</code></pre>

<pre><code>## [1] 576
</code></pre>

<ul>
<li>The object <code>a</code> is now the output of the expression <code>(12 + 180) * 3</code>. Check your <b>environment</b> (upper right panel)</li>
</ul>

</section>
<section class='' data-state='' id='slide-15'>
  <h2>Assignment operator</h2>
  <ul>
<li><p>Do not use <b><code>a = 12 + 180</code></b> for assignment in R. It&#39;s best practice to use <code>&lt;-</code> intead of <code>=</code>.</p></li>
<li><p>This may seem arbitrary, but it is helpful when you are reading someone else&#39;s code.</p></li>
</ul>

<p><a href = "https://google.github.io/styleguide/Rguide.xml" target = "_blank"> Google&#39;s R Style Guide  </a></p>

<p><a href = "http://adv-r.had.co.nz/Style.html" target = "_blank"> Advanced R: Style Guide </a></p>

</section>
<section class='' data-state='alert' id='slide-16'>
  <h2>R Tip: Comment on your code</h2>
  <p><b>Use <code>#</code> signs to comment on your script.</b> Anything to the right of a <code>#</code> is ignored. Good scripts (and homework) have comments before every major block of code. It&#39;s surprisingly hard to remember what you did when reviewing older code without comments, and it&#39;s particularly important when other people are reading your code.  </p>

<pre><code class="r">5 + 5  # this adds five and five 
</code></pre>

<pre><code>## [1] 10
</code></pre>

<pre><code class="r"># 10 + 10 this does not add ten and ten 
</code></pre>

</section>
<section class='' data-state='' id='slide-17'>
  <h2>Expressions using objects</h2>
  <ul>
<li>Objects can be combined into other, larger, and more complex objects.</li>
</ul>

<pre><code class="r">a &lt;- 8 * 10
b &lt;- 2 * 10
d &lt;- a * b
d
</code></pre>

<pre><code>## [1] 1600
</code></pre>

<pre><code class="r"># This is equivalent to: 
d &lt;- 8 * 10 * 2 * 10
d
</code></pre>

<pre><code>## [1] 1600
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-18'>
  <h2>Try It!</h2>
  <ol>
<li>Create an object that is equal to your age. Create another object that is equal to the age of the person to your right. Find the difference between these objects. </li>
</ol>

</section>
<section class='' data-state='' id='slide-19'>
  <h3>Data structures: 1. Vectors</h3>
  <ul>
<li>R has <b>five</b> common data structures. We will start with the simplest: <b>vectors</b>.<br></li>
<li>Vectors are one dimensional strings of numbers or characters. Vectors come in four types: numeric, integer, logical (TRUE or FALSE), and character. A vector is made using the combine function, <code>c()</code>.</li>
</ul>

</section>
<section class='' data-state='' id='slide-20'>
  <h3>Data structures: 1. Vectors</h3>
  <h4>Combining integers and numbers into vectors</h4>

<pre><code class="r">a &lt;- c(3, 4, 5)
a
</code></pre>

<pre><code>## [1] 3 4 5
</code></pre>

<pre><code class="r">b &lt;- c(3.24, 4.57, 5.03)
b
</code></pre>

<pre><code>## [1] 3.24 4.57 5.03
</code></pre>

</section>
<section class='' data-state='' id='slide-21'>
  <h3>Data structures: 1. Vectors</h3>
  <h4>Combining characters into vectors</h4>

<ul>
<li>Characters in R need to be enclosed in quotation marks.</li>
</ul>

<pre><code class="r">pets &lt;- c(&quot;dog&quot;, &quot;cat&quot;, &quot;bird&quot;)
pets
</code></pre>

<pre><code>## [1] &quot;dog&quot;  &quot;cat&quot;  &quot;bird&quot;
</code></pre>

</section>
<section class='' data-state='' id='slide-22'>
  <h3>Data structures: 1. Vectors</h3>
  <h4>Combining multiple objects into a single, new vector</h4>

<pre><code class="r"># Make objects 
a &lt;- sqrt(4 * 7)
b &lt;- 6 * 5
g &lt;- 9 * 2

# Combine
d &lt;- c(a, b, g)
d
</code></pre>

<pre><code>## [1]  5.291503 30.000000 18.000000
</code></pre>

</section>
<section class='' data-state='' id='slide-23'>
  <h3>Data structures: 1. Vectors</h3>
  <h4>Vectors of regular sequences</h4>

<ul>
<li>You can use a colon (<b>:</b>) to create a vector that includes all integers in between the numbers on either side of the colon</li>
</ul>

<pre><code class="r">x &lt;- 1:10
x
</code></pre>

<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10
</code></pre>

<ul>
<li>You can use <code>seq(from = , to = , by = )</code> to create a vector with a set min and max (from, to) with a specified increment (by)</li>
</ul>

<pre><code class="r">x &lt;- seq(from = 1, to = 20, by = 2)
x
</code></pre>

<pre><code>##  [1]  1  3  5  7  9 11 13 15 17 19
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-24'>
  <h2>Try It!</h2>
  <ol>
<li>Create a vector that includes all integers between 5 and 25. Name this vector <code>x</code>.</li>
<li>Create a vector that includes all even integers between 2 and 22. Name this vector <code>y</code>.</li>
<li>Create a single vector that <b>combines</b> object x and object y. Name this vector <code>z</code>.</li>
</ol>

</section>
<section class='' data-state='' id='slide-25'>
  <h3>Data structures: 1. Vectors</h3>
  <h4>Vector indexing: positional</h4>

<ul>
<li>You can access any element in the vector by putting its position in square brackets <code>[ ]</code></li>
</ul>

<pre><code class="r"># create a vector 
height &lt;- c(76, 72, 74, 74, 78)
height
</code></pre>

<pre><code>## [1] 76 72 74 74 78
</code></pre>

<pre><code class="r">height[1]  # extract the 1st element in the vector 
</code></pre>

<pre><code>## [1] 76
</code></pre>

<pre><code class="r">height[5]  # extract the 5th element
</code></pre>

<pre><code>## [1] 78
</code></pre>

</section>
<section class='' data-state='' id='slide-26'>
  <h3>Data structures: 1. Vectors</h3>
  <h4>Vector indexing: positional</h4>

<ul>
<li>You can also use vector indexing to return the same vector with certain elements missing using the - symbol</li>
</ul>

<pre><code class="r">height &lt;- c(76, 72, 74, 74, 78)

height[-1]
</code></pre>

<pre><code>## [1] 72 74 74 78
</code></pre>

</section>
<section class='' data-state='' id='slide-27'>
  <h3>Data structures: 1. Vectors</h3>
  <h4>Vector indexing: named</h4>

<ul>
<li>You can assign names to each element of the vector, and then extract the element by indexing based on the name.</li>
</ul>

<pre><code class="r"># Create a vector with named elements 
temp &lt;- c(monday = 28.1, tuesday = 28.5, wednesday = 29.0, thursday = 30.1, friday = 30.2)
temp
</code></pre>

<pre><code>##    monday   tuesday wednesday  thursday    friday 
##      28.1      28.5      29.0      30.1      30.2
</code></pre>

<pre><code class="r">temp[&quot;wednesday&quot;]
</code></pre>

<pre><code>## wednesday 
##        29
</code></pre>

<pre><code class="r">temp[3]
</code></pre>

<pre><code>## wednesday 
##        29
</code></pre>

</section>
<section class='' data-state='' id='slide-28'>
  <h3>Data structures: 1. Vectors</h3>
  <h4>Vector indexing: logical</h4>

<ul>
<li>You can extract elements in a vector that meet specific criteria based on a logical expression.</li>
</ul>

<pre><code class="r">y &lt;- 5:50
y
</code></pre>

<pre><code>##  [1]  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27
## [24] 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
</code></pre>

<pre><code class="r">y[y &lt;= 10]   # extract all elements less than or equal to 10
</code></pre>

<pre><code>## [1]  5  6  7  8  9 10
</code></pre>

<pre><code class="r">y[y &lt; 10 &amp; y != 5]   # extract all elements less than 10 that are not equal to 5
</code></pre>

<pre><code>## [1] 6 7 8 9
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-29'>
  <h2>Try It!</h2>
  <ol>
<li><p>What are the 9th and 12th positions of the vector <code>seq(1, 27, 0.5)</code>? </p></li>
<li><p><b>Bonus!</b> Can you find those positions simultaneously?</p></li>
<li><p>Create the vector <code>c(5:40)</code> and name it <code>m</code>. Extract all elements of <code>m</code> that are greater than or equal to 22.</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-30'>
  <h2>Functions</h2>
  <ul>
<li><p>A <b>function</b> is a stored object that performs a task given some inputs (called <i>arguments</i>). R has many functions already available, but you can also write your own functions.</p></li>
<li><p>Try using the tab key while entering arguments in any function to discover a useful feature of RStudio. (Try now with the <code>seq()</code> function.)</p></li>
<li><p>Functions are called in the format: <code>NameOfFunction(inputs)</code>   </p></li>
<li><p>The output of a function can be saved to an object: <code>output &lt;- NameOfFunction(inputs)</code></p></li>
</ul>

</section>
<section class='' data-state='' id='slide-31'>
  <h2>Functions</h2>
  <ul>
<li>It&#39;s not necessary to explicitly name arguments, but it&#39;s helpful when learning the language.</li>
</ul>

<pre><code class="r">seq(1, 10, 1)
</code></pre>

<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10
</code></pre>

<pre><code class="r">seq(from = 1, to = 10, by = 1)
</code></pre>

<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10
</code></pre>

</section>
<section class='' data-state='' id='slide-32'>
  <h2>Functions</h2>
  <ul>
<li>Use <code>sum()</code> to take the sum of all elements in a vector:</li>
</ul>

<pre><code class="r">sum(c(3, 4, 5))
</code></pre>

<pre><code>## [1] 12
</code></pre>

<ul>
<li>Use <code>mean()</code> to take the mean of all elements in a vector:</li>
</ul>

<pre><code class="r">mean(seq(5, 100, 5))
</code></pre>

<pre><code>## [1] 52.5
</code></pre>

</section>
<section class='' data-state='' id='slide-33'>
  <h2>Functions</h2>
  <ul>
<li>Functions can act on an object</li>
</ul>

<pre><code class="r">x &lt;- seq(5, 100, 5)

# use the vector x as the input to the function
mean(x)
</code></pre>

<pre><code>## [1] 52.5
</code></pre>

</section>
<section class='' data-state='alert' id='slide-34'>
  <h2>R Tip: The help system</h2>
  <ul>
<li>Help files provide important information on what the function does, how it works, and they provide examples at the very bottom.</li>
</ul>

<pre><code class="r">help(mean)
</code></pre>

<ul>
<li>You can also use <code>?</code> before a function name to view the help file </li>
</ul>

<pre><code class="r">?mean   # Same as help(mean) 
</code></pre>

<ul>
<li>Use <code>??</code> to search for functions; e.g. search for any function whose help files contain the word <code>&quot;robust&quot;</code></li>
</ul>

<pre><code class="r">??robust
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-35'>
  <h2>Try It!</h2>
  <ol>
<li><p>What is the median of 26, 24, 8, 17, and 42?<br>
<i>Remember:</i> functions are often named intuitively.</p></li>
<li><p>What does the function <code>range()</code> do, and what is the sample example in the help file?</p></li>
<li><p>Is <code>mean(4, 5)</code> different than <code>mean(c(4, 5))</code>?</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-36'>
  <h2>Packages</h2>
  <ul>
<li><p>We will be exploring <b>functions</b> in much greater detail throughout this course. (Including writing your own functions!)</p></li>
<li><p>Functions are kept inside <b>packages</b>, some of which come pre-installed with R. Others must be downloaded.</p></li>
</ul>

</section>
<section class='' data-state='' id='slide-37'>
  <h2>Packages</h2>
  <ul>
<li><p>There are many, many R packages - currently 7742!</p></li>
<li><p>Check the <a href = "http://cran.r-project.org/web/packages/available_packages_by_name.html" target = "_blank"> List of R Packages</a> and search with your favorite keyword, e.g. <i>ecology, paleo, dispersal, population, time series, phylogeny, community, Bayes</i></p></li>
</ul>

</section>
<section class='' data-state='' id='slide-38'>
  <h2>Installing Packages</h2>
  <ul>
<li>Often you will need to install a package to access a certain library of functions.</li>
</ul>

<pre><code class="r"># Install a new package
install.packages(&quot;igraph&quot;) 
</code></pre>

<ul>
<li>Remember to surround the package name in quotation marks for the <code>install.packages()</code> function.</li>
</ul>

</section>
<section class='' data-state='' id='slide-39'>
  <h2>Loading Packages</h2>
  <ul>
<li><p>Installing a package downloads it to your computer. You need to download packages before loading them.</p></li>
<li><p>Additionally, you have to load packages before you use them every time you restart R. This lets R know what packages to load and not waste memory by loading all potential functions.    </p></li>
</ul>

<pre><code class="r"># two ways to load packages:
library(ggplot2)
require(ggplot2)
</code></pre>

<ul>
<li><b>Note:</b> no quotation marks are needed for <code>library()</code> or <code>require()</code></li>
</ul>

</section>
<section class='' data-state='alert' id='slide-40'>
  <h2>R Tip: Loading Packages</h2>
  <ul>
<li><p>Good scripts (and homeworks) have a series of <code>require()</code> or <code>library()</code> statements at the top of the script.</p></li>
<li><p><a href = "http://yihui.name/en/2014/07/library-vs-require/">Some say</a> that you should preferentially use <code>library()</code>. The logic behind this is because <code>require()</code> &quot;tries&quot; to laod a package and <code>library()</code> actually loads a package. If you use <code>require()</code> at the top of the screen and you don&#39;t have the package installed, you&#39;ll get a failure message later on when you use functions in the package. However, if you use <code>library()</code> at the top of the screen and you don&#39;t have the package installed, you&#39;ll get a failure message right away.</p></li>
</ul>

</section>
<section class='' data-state='soothe' id='slide-41'>
  <h2>Try It!</h2>
  <ol>
<li><p>Search and find an interesting package. What is it? What is one function included in the package?</p></li>
<li><p>Install the package to your computer. </p></li>
</ol>

<p><a href = "http://cran.r-project.org/web/packages/available_packages_by_name.html" target = "_blank"> List of R Packages</a></p>

</section>
<section class='' data-state='' id='slide-42'>
  <h2>The R User Community</h2>
  <p><a href = "http://stackoverflow.com/questions/tagged/r" target = "_blank">Stack Overflow</a> </p>

<p><a href = "http://www.r-bloggers.com/" target = "_blank">R-Bloggers</a> </p>

<p><a href = "http://www.r-project.org/mail.html" target = "_blank">R Mailing Lists</a></p>

</section>
<section class='' data-state='' id='slide-43'>
  <h2>Practice</h2>
  <p>Worksheets created by Mike McCann and hosted on his Rpubs site</p>

<p><a href = "https://rpubs.com/mccannecology/53351" target = "_blank">Worksheet</a></p>

<p><a href = "https://rpubs.com/mccannecology/53358" target = "_blank">Answers</a></p>

</section>
<section class='' data-state='' id='slide-44'>
  <h2><b>Part 2:</b> Probability &amp; Distributions</h2>
  <h5><a href = "#/1">Back to the directory</a></h5>

</section>
<section class='' data-state='blackout' id='slide-45'>
  <h2>Review</h2>
  <ol>
<li><p>What is the (sum of 1 through 10) multiplied by two? </p></li>
<li><p>What are the 12th and 45th positions of the vector <code>seq(1, 43, 0.25)</code>?</p></li>
<li><p>Find all of the elements of the vector <code>seq(1, 10, 0.1)</code> that are less than 2. What is the median value of these elements?</p></li>
</ol>

</section>
<section class='' data-state='noborder' id='slide-46'>
  <h2>Distributions</h2>
  <ul>
<li>It is often  useful to generate a sample from a specific statisical distribution. To generate a sample of 1000 elements from a standard normal distribution (mean 0 and standard deviation 1) we can use the <b><code>rnorm()</code></b> function. </li>
</ul>

<pre><code class="r">norm &lt;- rnorm(n = 1000, mean = 0, sd = 1)  # create a vector of samples from a standard normal dist.
head(norm)  # view the first six elements of the vector
</code></pre>

<pre><code>## [1]  0.76000848 -0.37924614  0.06295452  1.64946492  1.29218106  0.06953762
</code></pre>

<pre><code class="r">hist(norm, col = &quot;palevioletred&quot;, main = &quot;&quot;, xlab = &quot;&quot;, ylab = &quot;Frequency&quot;)  # plot the vector of samples as a histogram
</code></pre>

<p><img src="assets/fig/unnamed-chunk-24-1.png" alt="plot of chunk unnamed-chunk-24"></p>

</section>
<section class='' data-state='soothe' id='slide-47'>
  <h2>Try It!</h2>
  <ol>
<li><p>Look up the <code>rnorm()</code> function in help screen. Locate the three arguments we used.</p></li>
<li><p>Draw 100 random numbers from a normal distribution with a mean of 3 and a std. dev. of 2, assign it to an object <code>a</code>.</p></li>
<li><p>Find the mean of your sample. How close was it to the true mean (that you set in <code>rnorm()</code>?</p></li>
<li><p>What is the 13th element in your vector <code>a</code>?</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-48'>
  <h3>Generating random samples from other distributions</h3>
  <ul>
<li>R has many distributions in the base package, including all those commonly used in biological analyses.<br></li>
<li>Depending on the distribution, each function has its own set of parameter arguments. </li>
<li>For example, the <b><code>rpois()</code></b> function is the random number generator for the Poisson distribution and it has only the parameter <i>lambda</i> (\(\lambda\)).</li>
<li>Statistical distributions will be covered in much more detail in Biometry.</li>
</ul>

</section>
<section class='' data-state='soothe' id='slide-49'>
  <h2>Try It!</h2>
  <ol>
<li><p>Draw 100 random samples from a Poisson distribution with <code>lambda = 3</code>, assign it to an object <code>w</code>.</p></li>
<li><p>Draw 1000 random samples from a Poisson distribution with <code>lambda = 3</code>, assign it to an object <code>y</code>.</p></li>
<li><p>Calculate the means of both vectors. What is the difference in means?</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-50'>
  <h2>Other properties of distributions</h2>
  <ul>
<li><p>For each distribution, there are <u>four functions</u> which will generate fundamental quantities of a distribution. Let&#39;s consider the normal distribution as an example. </p>

<ul>
<li><b><code>rnorm()</code></b> a random sample from a normal distribution.<br></li>
<li><b><code>dnorm()</code></b> the probability density (or densities) for a specific value (or values) for a normal distribution.<br></li>
<li><b><code>pnorm()</code></b> the cumulative distribution function (area under the curve)<br></li>
<li><b><code>qnorm()</code></b> the quantile function (value x at which the CDF of the distribution is equal to p)<br></li>
</ul></li>
<li><p>All will be covered during Biometry. See <a href = "http://user.mendelu.cz/drapela/Forest_Biometry/Lecture%20notes/R%20-%20tutorials%20and%20commands/R%20Probability%20Functions.pdf" target = _blank">this</a> website for a bit more information.</p></li>
</ul>

</section>
<section class='eighty' data-state='noborder' id='slide-51'>
  <h2>Univariate plots</h2>
  <h3>Barplots</h3>

<ul>
<li>Barplots are a basic type of univariate plot. The R function to create a barplot is <code>barplot()</code>.</li>
</ul>

<pre><code class="r"># use the R dataset of the length of rivers in the United States (a univariate data set)
head(rivers)
</code></pre>

<pre><code>## [1] 735 320 325 392 524 450
</code></pre>

<pre><code class="r">barplot(height = rivers[1:10], col = &quot;paleturquoise&quot;, main = &quot;Lengths of rivers in the United States&quot;, ylab = &quot;Length (in miles)&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-25-1.png" alt="plot of chunk unnamed-chunk-25"></p>

</section>
<section class='' data-state='' id='slide-52'>
  <h2>Univariate plots</h2>
  <h3>Histograms</h3>

<ul>
<li><p>Histograms are also a common univariate plot. Histograms place data into &quot;bins&quot;, and count the number (frequency) of data falling into each bin. </p></li>
<li><p>Bins are usually plotted as bars, with the x range on the x axis, and frequency on the y axis.</p></li>
</ul>

</section>
<section class='' data-state='' id='slide-53'>
  <h2>Univariate plots</h2>
  <h3>Histograms</h3>

<p>Histograms are an effective way of visualizing distributions</p>

<pre><code class="r"># generate and visualize 100 random samples from a standard normal distribution
sample &lt;- rnorm(1000)
hist(sample, col = &quot;palevioletred&quot;, main = &quot;&quot;, xlab = &quot;&quot;, ylab = &quot;Frequency&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-26-1.png" alt="plot of chunk unnamed-chunk-26"></p>

</section>
<section class='ninety' data-state='soothe' id='slide-54'>
  <h2>Try It!</h2>
  <ol>
<li><p>Draw 10 random variates from a normal distribution and plot a histogram of the sample. Repeat for 100, then 1000 random variates. What do you notice about the histograms?</p></li>
<li><p>Explore at least one other distribution; look up <code>?distributions</code>.</p></li>
<li><p>Take a random sample of the new distribution, plot the sample, and share with your neighbor.</p></li>
<li><p>Draw 1000 random variates from a normal distribution with a mean of 0 and a sd of 1. Look at <code>?hist</code>. How do you specify the size of the bin range? Try making bins from -4 to 4, with intervals of 0.01, 0.1, and 1. <b>Hint:</b> Consider using <code>seq()</code> in the &quot;breaks&quot; argument within <code>hist()</code>.</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-55'>
  <h2>Sampling</h2>
  <ul>
<li><p>In R, it&#39;s very easy to take a random sample of elements in any vector with the <code>sample()</code> function. </p></li>
<li><p>Take a random sample of 20 elements from a vector of integers between 1 and 100.</p></li>
</ul>

<pre><code class="r">x &lt;- 1:100
sample(x, size = 20)  # sample without replacement
</code></pre>

<pre><code>##  [1] 97 18 41 92 46 27 55 36 89 37 90 44 76 14 29 39 21 20 74 98
</code></pre>

<pre><code class="r">sample(x, size = 20, replace = TRUE)  # sample with replacement
</code></pre>

<pre><code>##  [1]  6 84 69 90 13 10 33  7 25 39 15 62 24 22 36 68 64 46 49 35
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-56'>
  <h2>Try It!</h2>
  <ol>
<li><p>Sample 9 elements from a vector of integers between 125 and 325 without replacement.</p></li>
<li><p>Sample 5 letters (using the pre-installed vector <code>letters</code>) from the alphabet with replacement.</p></li>
<li><p>Sample 0 or 1 twelve times, with and without replacement. What happens?</p></li>
</ol>

</section>
<section class='' data-state='noborder' id='slide-57'>
  <h2>Bivariate plots</h2>
  <h3>Scatterplots</h3>

<ul>
<li>Scatterplots are useful for showing the relationship between two variables </li>
</ul>

<pre><code class="r">sample1 &lt;- rnorm(n = 40, mean = 4, sd = 2)  # random sample from a normal dist.
sample2 &lt;- rnorm(n = 40, mean = 2, sd = 1)  # random sample from a different normal dist.
plot(formula = sample2 ~ sample1, pch = 20)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-28-1.png" alt="plot of chunk unnamed-chunk-28"></p>

</section>
<section class='' data-state='noborder' id='slide-58'>
  <h2>Bivariate plots</h2>
  <h3>Scatterplots</h3>

<ul>
<li>Instead of writing the relationship as a formula, i.e. <code>y ~ x</code>, you can write <code>plot(x, y)</code>.</li>
</ul>

<pre><code class="r">plot(x = sample1, y = sample2, pch = 20)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-29-1.png" alt="plot of chunk unnamed-chunk-29"> </p>

</section>
<section class='' data-state='noborder' id='slide-59'>
  <h2>Bivariate plots</h2>
  <h3>Scatterplots</h3>

<ul>
<li>You can add straight lines to a plot with <code>abline()</code>. <b>a</b> specifies the intercept and <b>b</b> the slope.</li>
</ul>

<pre><code class="r">plot(sample1, sample2, pch = 20)
abline(a = -0.1, b = 1, col=&quot;royalblue4&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-30-1.png" alt="plot of chunk unnamed-chunk-30"></p>

</section>
<section class='' data-state='noborder' id='slide-60'>
  <h2>Bivariate plots</h2>
  <h3>Scatterplots</h3>

<ul>
<li><p>Lines can also be model fits </p></li>
<li><p><code>lm()</code> fits a linear relationship between <b>x</b> and <b>y</b>.</p></li>
</ul>

<pre><code class="r">plot(sample1, sample2)
abline(lm(sample2 ~ sample1), col=&quot;royalblue&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-31-1.png" alt="plot of chunk unnamed-chunk-31"></p>

</section>
<section class='' data-state='' id='slide-61'>
  <h2>Lots of useful links for plotting</h2>
  <p><a href = "http://rpubs.com/SusanEJohnston/7953" target = "_blank">R Base Graphics: An Idiot&#39;s Guide</a></p>

<p><a href = "https://leemendelowitz.github.io/blog/r-base-graphics-plotting.html" target = "_blank">R Base Graphics Plotting</a></p>

<p><a href = "http://www.statmethods.net/graphs/" target = "_blank">Quick-R: Basic Graphs</a></p>

<p><a href = "http://www.harding.edu/fmccown/r/" target = "_blank">Producing Simple Graphs with R</a></p>

<p><a href = "http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" target = "_blank">R Colors</a></p>

<p>More on plotting later (making plots that are much more visually appealing!)</p>

</section>
<section class='' data-state='' id='slide-62'>
  <h2>Practice</h2>
  <p><a href = "https://rpubs.com/mccannecology/53352" target = "_blank">Worksheet</a></p>

<p><a href = "https://rpubs.com/mccannecology/53359" target = "_blank">Answers</a></p>

</section>
<section class='' data-state='' id='slide-63'>
  <h2><b>Part 3:</b> Data Manipulation</h2>
  <h5><a href = "#/1">Back to the directory</a></h5>

</section>
<section class='' data-state='' id='slide-64'>
  
  <p>Download the file for this section</p>

<p><a href = "https://www.dropbox.com/s/qk11hhsipddk3fk/seedlings.csv?dl=0" target = "_blank">seedlings.csv</a></p>

</section>
<section class='' data-state='' id='slide-65'>
  <h3>Data structures: 2. Data frames</h3>
  <ul>
<li>Most data you&#39;ve worked with probably isn&#39;t in vector form. More likely, it includes multiple rows and columns. Thus, a <b>data frame</b> is a very important data type in R and what you&#39;ll be working with much of the time. </li>
</ul>

<pre><code class="r">head(trees)  # pre-loaded dataset in R - measurements of black cherry trees
</code></pre>

<pre><code>##   Girth Height Volume
## 1   8.3     70   10.3
## 2   8.6     65   10.3
## 3   8.8     63   10.2
## 4  10.5     72   16.4
## 5  10.7     81   18.8
## 6  10.8     83   19.7
</code></pre>

</section>
<section class='eighty' data-state='noborder' id='slide-66'>
  <h3>Data structures: 2. Data frames</h3>
  <p>Data frames are usually read in from a file, but R comes with many practice datasets. 
We will use the <code>iris</code> dataset, <a href = "http://en.wikipedia.org/wiki/Iris_flower_data_set" target = "_blank">famously used by R.A. Fisher in 1936</a></p>

<p><a href="https://commons.wikimedia.org/wiki/File:Iris_versicolor_3.jpg#/media/File:Iris_versicolor_3.jpg" title = "Iris versicolor"><img src = "https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Iris_versicolor_3.jpg/800px-Iris_versicolor_3.jpg" height = "175" width = "275"></a></p>

<pre><code class="r">head(iris)
</code></pre>

<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa
</code></pre>

</section>
<section class='' data-state='' id='slide-67'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Useful functions for data frames</h4>

<ul>
<li><code>head()</code> - see first 6 rows</li>
<li><code>tail()</code> - see last 6 rows</li>
<li><code>dim()</code> - dimensions (# rows, # columns)</li>
<li><code>nrow()</code> - number of rows</li>
<li><code>ncol()</code> - number of columns</li>
<li><code>str()</code> - structure of any object <i>(very useful!)</i></li>
<li><code>class()</code> - class of any object</li>
<li><code>rownames()</code> - row names </li>
<li><code>colnames()</code> - column names</li>
</ul>

</section>
<section class='' data-state='soothe' id='slide-68'>
  <h2>Try It!</h2>
  <ol>
<li><p>How many rows does the <code>iris</code> data frame have?</p></li>
<li><p>How many columns? What are the column names?</p></li>
<li><p>Using the <code>str()</code> function, how many species are in the data?</p></li>
<li><p>What are the classes of each of the columns?</p></li>
</ol>

</section>
<section class='ninety' data-state='' id='slide-69'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame syntax and subsetting</h4>

<ul>
<li>R has many powerful subset operators that will allow you to easily perform complex operations on any kind of dataset (much easier than with Excel!)</li>
<li>Think of data frames as a series of vectors grouped together into a table</li>
</ul>

<pre><code class="r">head(iris)
</code></pre>

<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-70'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame indexing: positional</h4>

<ul>
<li>Index individual elements of a data frame with <code>nameofdf[row#, column#]</code></li>
</ul>

<pre><code class="r">iris[1, 1]  # first row, first column
</code></pre>

<pre><code>## [1] 5.1
</code></pre>

<pre><code class="r">iris[3, 3]  # third row, third column
</code></pre>

<pre><code>## [1] 1.3
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-71'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame indexing: positional</h4>

<ul>
<li>Index entire rows or columns by leaving one of the positions blank, i.e. <code>nameofdf[, column#]</code> or <code>nameofdf[row#, ]</code></li>
</ul>

<pre><code class="r">iris[2, ]  # subset the entire second row 
</code></pre>

<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 2          4.9           3          1.4         0.2  setosa
</code></pre>

<pre><code class="r">iris[, 2]  # subset the entire second column 
</code></pre>

<pre><code>##   [1] 3.5 3.0 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 3.7 3.4 3.0 3.0 4.0 4.4 3.9
##  [18] 3.5 3.8 3.8 3.4 3.7 3.6 3.3 3.4 3.0 3.4 3.5 3.4 3.2 3.1 3.4 4.1 4.2
##  [35] 3.1 3.2 3.5 3.6 3.0 3.4 3.5 2.3 3.2 3.5 3.8 3.0 3.8 3.2 3.7 3.3 3.2
##  [52] 3.2 3.1 2.3 2.8 2.8 3.3 2.4 2.9 2.7 2.0 3.0 2.2 2.9 2.9 3.1 3.0 2.7
##  [69] 2.2 2.5 3.2 2.8 2.5 2.8 2.9 3.0 2.8 3.0 2.9 2.6 2.4 2.4 2.7 2.7 3.0
##  [86] 3.4 3.1 2.3 3.0 2.5 2.6 3.0 2.6 2.3 2.7 3.0 2.9 2.9 2.5 2.8 3.3 2.7
## [103] 3.0 2.9 3.0 3.0 2.5 2.9 2.5 3.6 3.2 2.7 3.0 2.5 2.8 3.2 3.0 3.8 2.6
## [120] 2.2 3.2 2.8 2.8 2.7 3.3 3.2 2.8 3.0 2.8 3.0 2.8 3.8 2.8 2.8 2.6 3.0
## [137] 3.4 3.1 3.0 3.1 3.1 3.1 2.7 3.2 3.3 3.0 2.5 3.0 3.4 3.0
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-72'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame indexing: positional</h4>

<ul>
<li><p>Data frames can be indexed for both rows and columns</p></li>
<li><p>Get the 5th, 7th, and 9th rows for the first two columns.</p></li>
</ul>

<pre><code class="r">iris[c(5, 7, 9), 1:2]
</code></pre>

<pre><code>##   Sepal.Length Sepal.Width
## 5          5.0         3.6
## 7          4.6         3.4
## 9          4.4         2.9
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-73'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame indexing: named</h4>

<ul>
<li>Columns can also be called by name using brackets</li>
</ul>

<pre><code class="r">iris[, &quot;Sepal.Length&quot;]
</code></pre>

<ul>
<li>Or, use the dollar sign <code>$</code> notation to call a column by name</li>
</ul>

<pre><code class="r">iris$Sepal.Length
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-74'>
  <h2>Try It!</h2>
  <ol>
<li><p>What is the 9th entry of the <code>Sepal.Width</code> column? Save it as object <code>x</code>.</p></li>
<li><p>Subset the 17th row of the data frame <code>iris</code>.</p></li>
<li><p>Return an object with the 1st, 4th and 7th rows of the <code>iris</code> dataframe.</p></li>
<li><p>Use the <code>seq()</code> function to subset all odd rows in the <code>iris</code> dataset.</p></li>
<li><p>What happens when you use negative numbers to index the <code>iris</code> dataframe? <b>Hint:</b> Use the function <code>dim()</code> on the original and final objects.</p></li>
</ol>

</section>
<section class='ninety' data-state='noborder' id='slide-75'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame indexing: logical</h4>

<ul>
<li>An extremely helpful tool is to subset your data using logic rather than an index.<br></li>
</ul>

<pre><code class="r">petal &lt;- iris$Petal.Width  # subset of the column petal width

hist(petal, col = &quot;darkseagreen1&quot;, main = &quot;Petal width of Iris&quot;, xlab = &quot;&quot;, ylab = &quot;Frequency&quot;)  # make a histogram of petal width frequency
</code></pre>

<p><img src="assets/fig/unnamed-chunk-40-1.png" alt="plot of chunk unnamed-chunk-40"></p>

<ul>
<li>Continued on next slide</li>
</ul>

</section>
<section class='' data-state='' id='slide-76'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame indexing: logical</h4>

<pre><code class="r">logi &lt;- petal &gt; 1  # which petal widths are greater than 1?
head(logi)
</code></pre>

<pre><code>## [1] FALSE FALSE FALSE FALSE FALSE FALSE
</code></pre>

<pre><code class="r">iris.subset &lt;- iris[logi, ]  # subset of iris only including individuals where petal width is greater than 1

head(iris.subset)
</code></pre>

<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51          7.0         3.2          4.7         1.4 versicolor
## 52          6.4         3.2          4.5         1.5 versicolor
## 53          6.9         3.1          4.9         1.5 versicolor
## 54          5.5         2.3          4.0         1.3 versicolor
## 55          6.5         2.8          4.6         1.5 versicolor
## 56          5.7         2.8          4.5         1.3 versicolor
</code></pre>

<p>This is the same as:</p>

<pre><code class="r">iris[iris$Petal.Width &gt; 1, ]
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-77'>
  <h2>Try It!</h2>
  <ol>
<li><p>Why is <code>iris[iris &gt; 3, ]</code> a nonsensical command? </p></li>
<li><p>What about <code>iris[iris$Sepal.Length &gt; 3]</code>? </p></li>
<li><p>Create a histogram of petal lengths for the entire data.</p></li>
<li><p>Subset the data for petal lengths greater than two.</p></li>
<li><p>Create a histogram of your new data.</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-78'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame indexing: logical</h4>

<ul>
<li>For all types of data, if we want to subset a specific value/character/factor we use the logical operator &quot;<code>==</code>&quot;</li>
</ul>

<pre><code class="r">iris.subset &lt;- iris[iris$Petal.Length == 4,]
head(iris.subset)
</code></pre>

<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 54          5.5         2.3            4         1.3 versicolor
## 63          6.0         2.2            4         1.0 versicolor
## 72          6.1         2.8            4         1.3 versicolor
## 90          5.5         2.5            4         1.3 versicolor
## 93          5.8         2.6            4         1.2 versicolor
</code></pre>

</section>
<section class='' data-state='' id='slide-79'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame indexing: logical</h4>

<ul>
<li><p>Subset only records from the species <i>I. versicolor</i></p></li>
<li><p>Note that quotation marks are needed when dealing with characters and factors</p></li>
</ul>

<pre><code class="r">versicolor.only &lt;- iris[iris$Species == &quot;versicolor&quot;, ]
head(versicolor.only)
</code></pre>

<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51          7.0         3.2          4.7         1.4 versicolor
## 52          6.4         3.2          4.5         1.5 versicolor
## 53          6.9         3.1          4.9         1.5 versicolor
## 54          5.5         2.3          4.0         1.3 versicolor
## 55          6.5         2.8          4.6         1.5 versicolor
## 56          5.7         2.8          4.5         1.3 versicolor
</code></pre>

</section>
<section class='' data-state='' id='slide-80'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Data frame indexing: logical</h4>

<ul>
<li>It&#39;s also possible to combine logical statments:

<ul>
<li>Use <b><code>&amp;</code></b> (AND) if you want both statements to be true.<br></li>
<li>Use <b><code>|</code></b> (OR) if you want either statement to be true.</li>
</ul></li>
</ul>

<pre><code class="r">versicolor.4 &lt;- iris[iris$Petal.Length &gt; 4 &amp; iris$Species == &quot;versicolor&quot;, ]  # subset of observations or only I. versicolor where petal length is greater than 4
head(versicolor.4)
</code></pre>

<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51          7.0         3.2          4.7         1.4 versicolor
## 52          6.4         3.2          4.5         1.5 versicolor
## 53          6.9         3.1          4.9         1.5 versicolor
## 55          6.5         2.8          4.6         1.5 versicolor
## 56          5.7         2.8          4.5         1.3 versicolor
## 57          6.3         3.3          4.7         1.6 versicolor
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-81'>
  <h2>Try It!</h2>
  <p>Explain in words each of the following logical statements</p>

<ol>
<li><p><code>iris[1:4, ]</code></p></li>
<li><p><code>iris[c(1:15), c(1, 3)]</code></p></li>
<li><p><code>iris[iris$Species == &quot;setosa&quot;, &quot;Petal.Width&quot;]</code></p></li>
<li><p>What happens when you add a <code>!</code> before a logical statment? <b>Hint:</b> Compare <code>iris[iris$Species == &quot;setosa&quot;, ]</code> and <code>iris[!iris$Species == &quot;setosa&quot;, ]</code>.</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-82'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Build a data frame from scratch</h4>

<ul>
<li>Use the <b><code>data.frame</code></b> function. </li>
</ul>

<pre><code class="r">df &lt;- data.frame(x = 1:5, y = 6:2)
df
</code></pre>

<pre><code>##   x y
## 1 1 6
## 2 2 5
## 3 3 4
## 4 4 3
## 5 5 2
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-83'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Add columns to data frames</h4>

<ul>
<li>Use the <code>data.frame</code> function (again).</li>
</ul>

<pre><code class="r">df &lt;- data.frame(df, z = 41:45)  # adding new column z to previous df
df
</code></pre>

<pre><code>##   x y  z
## 1 1 6 41
## 2 2 5 42
## 3 3 4 43
## 4 4 3 44
## 5 5 2 45
</code></pre>

<ul>
<li>Or, use the assignment operator <code>&lt;-</code> with the <code>$</code> notation</li>
</ul>

<pre><code class="r">df$z &lt;- 41:45
df
</code></pre>

<pre><code>##   x y  z
## 1 1 6 41
## 2 2 5 42
## 3 3 4 43
## 4 4 3 44
## 5 5 2 45
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-84'>
  <h3>Data structures: 2. Data frames</h3>
  <h4>Remove columns from data frames</h4>

<ul>
<li>Use the - symbol and the positional index</li>
</ul>

<pre><code class="r">df.subset &lt;- df[, -3]
df.subset
</code></pre>

<pre><code>##   x y
## 1 1 6
## 2 2 5
## 3 3 4
## 4 4 3
## 5 5 2
</code></pre>

<ul>
<li>Or, assign <code>NULL</code> to the column (using assignment operator <code>&lt;-</code> and the <code>$</code> notation)</li>
</ul>

<pre><code class="r">df$z &lt;- NULL
df
</code></pre>

<pre><code>##   x y
## 1 1 6
## 2 2 5
## 3 3 4
## 4 4 3
## 5 5 2
</code></pre>

</section>
<section class='' data-state='' id='slide-85'>
  <h3>Data structures: 3. Matrices</h3>
  <ul>
<li><p>Similar to data frames, matrices are two-dimensional. However, they can only consist of numbers (not characters or factors).</p></li>
<li><p>Why do you need them? Some functions (e.g. matrix algebra) require a <b>matrix</b> as an input. </p></li>
</ul>

<pre><code class="r">a &lt;- matrix(1:9, ncol = 3, nrow = 3)
a
</code></pre>

<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
</code></pre>

<pre><code class="r">b &lt;- as.data.frame(a)  # convert matrix to df

diag(b)  # function fails with df
</code></pre>

<pre><code>## Error in diag(b): (list) object cannot be coerced to type &#39;double&#39;
</code></pre>

<pre><code class="r">diag(a)  # works with matrix
</code></pre>

<pre><code>## [1] 1 5 9
</code></pre>

</section>
<section class='' data-state='' id='slide-86'>
  <h3>Data structures: 3. Matrices</h3>
  <ul>
<li>Indexing is the same as with data frames</li>
</ul>

<pre><code class="r">a &lt;- matrix(1:9, ncol = 3, nrow = 3)
a
</code></pre>

<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
</code></pre>

<pre><code class="r">a[2, 2]
</code></pre>

<pre><code>## [1] 5
</code></pre>

<pre><code class="r">a[2, ]
</code></pre>

<pre><code>## [1] 2 5 8
</code></pre>

</section>
<section class='' data-state='' id='slide-87'>
  <h2>Importing your own data</h2>
  <ul>
<li><p>R is not a spreadsheet program, so it&#39;s not great for direct data entry. It&#39;s best to start with spreadsheets for data entry and storage, and to import spreadsheets into R for data visualization and analysis.</p></li>
<li><p><b>.csv</b> (comma separated values) files are often the preferred format to import into R. </p></li>
<li><p>Before we do that, we will need to consider <b>working directories</b>.</p></li>
</ul>

</section>
<section class='' data-state='' id='slide-88'>
  <h2>Working directory</h2>
  <ul>
<li>Find out what your current working directory is</li>
</ul>

<pre><code class="r">getwd()
</code></pre>

<pre><code>## [1] &quot;/Users/nicolekinlock/Documents/Biometry TA/R Mini Course/slides/Rminicourse&quot;
</code></pre>

<ul>
<li>This is the folder on your computer where R will look to open or write files. </li>
</ul>

</section>
<section class='' data-state='' id='slide-89'>
  <h2>Working directory</h2>
  <ul>
<li>Set your working directory </li>
</ul>

<pre><code class="r">setwd(&quot;/Users/nicolekinlock/Documents/Biometry TA/&quot;)
</code></pre>

</section>
<section class='' data-state='' id='slide-90'>
  <h2>Importing your own data</h2>
  <ul>
<li>Load the downloaded seedling data to your environment</li>
</ul>

<pre><code class="r">seedlings &lt;- read.csv(&quot;/Users/nicolekinlock/Documents/Biometry TA/R Mini Course/data/seedlings.csv&quot;)
head(seedlings)
</code></pre>

</section>
<section class='' data-state='alert' id='slide-91'>
  <h2>R Tip: Variable names</h2>
  <ul>
<li>One of the largest sources of frustration with R can be importing data. Variable names, e.g. column names in a spreadsheet, often cause problems. 

<ul>
<li><b>Do not have spaces in variable names</b><br></li>
<li><b>Abbreviate when appropriate</b><br></li>
</ul></li>
</ul>

<pre><code class="r">Average Height  # BAD - this won&#39;t work
Average.Height, Average_Height, average.height, average_height, averageHeight  # BETTER - these will work, but will be slow to type repeatedly
avg.height, avg_height, avgHeight   # GOOD!  
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-92'>
  <h2>Try It!</h2>
  <ol>
<li>Import the data frame <a href = "https://www.dropbox.com/s/qk11hhsipddk3fk/seedlings.csv?dl=0" target = "_blank">seedlings.csv</a> and load it to your environment. Store it as an object, <code>seedlings</code>.</li>
<li>What is the mean height for all seedlings? What about the mean height for all seedlings except <i>Rhus typhina</i>?</li>
<li>What is the difference in the mean height for <i>Rosa multiflora</i> seedlings and <i>Rubus occidentalis</i> seedlings?</li>
</ol>

</section>
<section class='' data-state='' id='slide-93'>
  <h2>Exporting data frames</h2>
  <ul>
<li>After you&#39;ve made changes (done subsetting, etc.), you may want to export the altered data frame.</li>
</ul>

<pre><code class="r"># write the file 
write.csv(iris, file = &quot;iris.csv&quot;, row.names = FALSE)

# check in your working directory for the new file
list.files()
</code></pre>

</section>
<section class='' data-state='' id='slide-94'>
  <h2>Helpful link</h2>
  <p><a href = "http://adv-r.had.co.nz/Data-structures.html" target = "_blank">Data structures</a></p>

</section>
<section class='' data-state='' id='slide-95'>
  <h2>Practice</h2>
  <p><a href = "https://rpubs.com/mccannecology/53354" target = "_blank">Worksheet</a></p>

<p><a href = "https://rpubs.com/mccannecology/53360" target = "_blank">Answers</a></p>

</section>
<section class='' data-state='' id='slide-96'>
  <h2><b>Part 4:</b> Looping and vectorization</h2>
  <h5><a href = "#/1">Back to the directory</a></h5>

</section>
<section class='' data-state='' id='slide-97'>
  <h2>For loops</h2>
  <ul>
<li><p>Loops are an important programming tool. The first loop we will learn is a <b>for loop</b>. </p></li>
<li><p>For loops run for a certain number of steps (iterations) that you define, during which any statements in the loop are executed.</p></li>
</ul>

<p>-The basic syntax is:</p>

<p><code>for (i in 1:number_of_iterations) {</code>
<code>execute these statements</code>
<code>}</code></p>

</section>
<section class='' data-state='' id='slide-98'>
  <h2>For loops</h2>
  <h3>Why use a for loop?</h3>

<ol>
<li><p>We have a repeated process with indentical formatting, but different values.</p></li>
<li><p>To avoid laborious typing into R</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-99'>
  <h2>For loops</h2>
  <h3>Our first loop</h3>

<p><code>for (i in 1:5) {</code></p>

<ul>
<li>i starts at 1. R will execute some statements; </li>
<li>i is increased to i = 2 and statements are executed again; </li>
<li>i is increased to i = 3 and statements are executed again; </li>
<li>and so on, until i = 5, at which point the loop executes the set of statements for the last time.</li>
</ul>

<p><code>}</code></p>

</section>
<section class='' data-state='' id='slide-100'>
  <h2>For loops</h2>
  <h3>Our first loop</h3>

<pre><code class="r">for (i in 1:5) {
    print(i)
}
</code></pre>

<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
</code></pre>

</section>
<section class='' data-state='' id='slide-101'>
  <h2>For loops</h2>
  <h3>Syntax</h3>

<p><b>Be sure you distinguish between:</b></p>

<ul>
<li>curly braces { } </li>
<li>parentheses ( )<br></li>
<li>square brackets [ ]</li>
</ul>

</section>
<section class='' data-state='' id='slide-102'>
  <h2>For loops</h2>
  <h3>Syntax</h3>

<p>Brackets [ ] are used to access <i>elements</i> of vectors, matrices, and data frames. The number of dimensions in the data structure is very important.</p>

<pre><code class="r">x &lt;- 1:10  # vector
x[6]   # vectors have one dimension
</code></pre>

<pre><code>## [1] 6
</code></pre>

<pre><code class="r">x[c(2, 6, 9)] 
</code></pre>

<pre><code>## [1] 2 6 9
</code></pre>

<pre><code class="r">m &lt;- matrix(data = seq(0.1, 10, .1), nrow = 10, ncol = 10)  # matrix
m[6, 6]  # matrices have two dimensions
</code></pre>

<pre><code>## [1] 5.6
</code></pre>

<pre><code class="r">m[6, ]
</code></pre>

<pre><code>##  [1] 0.6 1.6 2.6 3.6 4.6 5.6 6.6 7.6 8.6 9.6
</code></pre>

</section>
<section class='' data-state='' id='slide-103'>
  <h2>For loops</h2>
  <h3>Syntax</h3>

<p>Parentheses ( ) are used to specify arguments to <i>functions</i>. </p>

<pre><code class="r">x &lt;- 1:10

sum(x)
</code></pre>

<pre><code>## [1] 55
</code></pre>

<pre><code class="r">mean(x)
</code></pre>

<pre><code>## [1] 5.5
</code></pre>

</section>
<section class='' data-state='' id='slide-104'>
  <h2>For loops</h2>
  <h3>Syntax</h3>

<p>Finally, use curly braces { } to enclose all of the statements to be executed in a loop.</p>

<pre><code class="r">for (i in 1:3) {
  print(i)
}
</code></pre>

<pre><code>## [1] 1
## [1] 2
## [1] 3
</code></pre>

</section>
<section class='' data-state='' id='slide-105'>
  <h2>For loops</h2>
  <h3>Using a for loop</h3>

<p>You can perform operations on <i>i</i>.</p>

<pre><code class="r">for (i in 1:4) {
    print(i^2)
}
</code></pre>

<pre><code>## [1] 1
## [1] 4
## [1] 9
## [1] 16
</code></pre>

</section>
<section class='' data-state='' id='slide-106'>
  <h2>For loops</h2>
  <h3>Using a for loop</h3>

<p>Assignments can occur in a loop. </p>

<pre><code class="r">x &lt;- 2

for (i in 1:4) {
    x &lt;- x^2
    print(x)
}
</code></pre>

<pre><code>## [1] 4
## [1] 16
## [1] 256
## [1] 65536
</code></pre>

<p><b>Note:</b> <code>i</code> is not directly called in this loop, unlike in the previous ones. </p>

<p>The operation <code>x &lt;- x^2</code> will be done four times. <code>x</code> changes with each iteration because of the re-assignment in the loop.</p>

</section>
<section class='' data-state='soothe' id='slide-107'>
  <h2>Try It!</h2>
  <ol>
<li><p>Create a for loop that prints numbers 1 to 100.</p></li>
<li><p>Create a for loop that prints numbers 100 to 1.</p></li>
<li><p>Create a for loop that adds 1 to numbers 1:5.</p></li>
<li><p>Create a for loop that divides all even numbers from 0 to 20 by 10 (consider using <code>seq()</code>).</p></li>
<li><p><b>Bonus!</b> What would be the final value here (without trying it)? Why?</p></li>
</ol>

<pre><code class="r">dogs &lt;- 10
for (i in 1:5) {
    dogs &lt;- dogs + 1
}
</code></pre>

</section>
<section class='' data-state='' id='slide-108'>
  <h2>For loops</h2>
  <h3>For loops and vectors</h3>

<p>In the above examples, we used <i>i</i> directly in mathematical operations. It is more common to loop over elements of a vector to accomplish some particular task.</p>

<pre><code class="r">nameVector &lt;- c(&quot;Harry&quot;, &quot;Hermione&quot;, &quot;Ron&quot;)

for (i in 1:length(nameVector)) {
    print(paste(&quot;Hi,&quot;, nameVector[i], sep = &quot; &quot;))
}
</code></pre>

<pre><code>## [1] &quot;Hi, Harry&quot;
## [1] &quot;Hi, Hermione&quot;
## [1] &quot;Hi, Ron&quot;
</code></pre>

</section>
<section class='' data-state='' id='slide-109'>
  <h2>For loops</h2>
  <h3>What did that really do?</h3>

<ul>
<li>Consider the loop in pieces, here just for <code>i = 1</code></li>
</ul>

<pre><code class="r">length(nameVector)  # the # of positions in nameVector
</code></pre>

<pre><code>## [1] 3
</code></pre>

<pre><code class="r">nameVector[1]  # the 1st position in nameVector
</code></pre>

<pre><code>## [1] &quot;Harry&quot;
</code></pre>

<pre><code class="r"># combine text and index of a vector
paste(&quot;Hi,&quot;, nameVector[1], sep = &quot; &quot;) 
</code></pre>

<pre><code>## [1] &quot;Hi, Harry&quot;
</code></pre>

</section>
<section class='seventy' data-state='' id='slide-110'>
  <h2>For loops</h2>
  <h3>What did that really do?</h3>

<p>Loops exist in their own enclosed environment, so use <code>print()</code> to view them on your console so you can see the output of each iteration. </p>

<pre><code class="r">nameVector &lt;- c(&quot;Harry&quot;, &quot;Hermione&quot;, &quot;Ron&quot;)

for (i in 1:length(nameVector)) {
    print(paste(&quot;Hi,&quot;, nameVector[i], sep = &quot; &quot;))
}
</code></pre>

<pre><code>## [1] &quot;Hi, Harry&quot;
## [1] &quot;Hi, Hermione&quot;
## [1] &quot;Hi, Ron&quot;
</code></pre>

<p>Without <code>print()</code> or an assignment <code>&lt;-</code> results are not returned.</p>

<pre><code class="r">nameVector &lt;- c(&quot;Harry&quot;, &quot;Hermione&quot;, &quot;Ron&quot;)

for (i in 1:length(nameVector)) {
    paste(&quot;Hi,&quot;, nameVector[i], sep = &quot; &quot;)
}
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-111'>
  <h2>Try It!</h2>
  <ol>
<li><p>Create a vector of the days of the week and generate a message that says &quot;Today is x&quot; using a loop. </p></li>
<li><p>Explain why the following code is wrong:  </p></li>
</ol>

<pre><code class="r">for (x in 1:10) {
  print(sum(i))
}
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-112'>
  <h3>Data structures: 4. Lists</h3>
  <ul>
<li><p><b>Lists</b> are another of the 5 basic data structures in R. Lists, like vectors, are one dimensional. </p></li>
<li><p>The elements of a vector must all be the same type. In this example, 1 and 2 are converted to characters because &quot;blue&quot; is included.</p></li>
</ul>

<pre><code class="r">x &lt;- c(1, 2, &quot;blue&quot;)
x
</code></pre>

<pre><code>## [1] &quot;1&quot;    &quot;2&quot;    &quot;blue&quot;
</code></pre>

<pre><code class="r">typeof(x)
</code></pre>

<pre><code>## [1] &quot;character&quot;
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-113'>
  <h3>Data structures: 4. Lists</h3>
  <ul>
<li>In contrast, the elements of a list can be any type (numeric, integer, logical, character), or other lists.</li>
</ul>

<pre><code class="r">a &lt;- list(numeric = seq(0, 0.25, 0.01), integer = 10:20, logical = c(TRUE, FALSE, FALSE), character = c(&quot;open&quot;, &quot;closed&quot;, &quot;closed&quot;, &quot;open&quot;))
a
</code></pre>

<pre><code>## $numeric
##  [1] 0.00 0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 0.10 0.11 0.12 0.13
## [15] 0.14 0.15 0.16 0.17 0.18 0.19 0.20 0.21 0.22 0.23 0.24 0.25
## 
## $integer
##  [1] 10 11 12 13 14 15 16 17 18 19 20
## 
## $logical
## [1]  TRUE FALSE FALSE
## 
## $character
## [1] &quot;open&quot;   &quot;closed&quot; &quot;closed&quot; &quot;open&quot;
</code></pre>

<ul>
<li>It may seem multidimensional, but it does behave as a one dimensional data structure.</li>
</ul>

</section>
<section class='sixty' data-state='' id='slide-114'>
  <h3>Data structures: 4. Lists</h3>
  <h4>Constructing lists and list syntax</h4>

<ul>
<li>You can construct a list with <code>list()</code> (compare with <code>c()</code> for vectors) </li>
</ul>

<pre><code class="r">x &lt;- c(1, 2, 3, 4, 5)
y &lt;- c(3, 6, 8, 10)

v &lt;- c(x, y)  # create a vector
str(v)
</code></pre>

<pre><code>##  num [1:9] 1 2 3 4 5 3 6 8 10
</code></pre>

<pre><code class="r">l &lt;- list(x, y)  # create a list
str(l)
</code></pre>

<pre><code>## List of 2
##  $ : num [1:5] 1 2 3 4 5
##  $ : num [1:4] 3 6 8 10
</code></pre>

<pre><code class="r">v[2]  # index a vector 
</code></pre>

<pre><code>## [1] 2
</code></pre>

<pre><code class="r">l[[2]]  # index a list 
</code></pre>

<pre><code>## [1]  3  6  8 10
</code></pre>

</section>
<section class='sixty' data-state='' id='slide-115'>
  <h3>Data structures: 4. Lists</h3>
  <h4>List indexing</h4>

<ul>
<li><p>Using the single bracket indexing operator <code>[]</code> will return a list</p></li>
<li><p>Using a double bracket indexing operator <code>[[]]</code> will return contents within a list (integers, numbers, characters)</p></li>
<li><p>The main difference is in the class of the output</p></li>
</ul>

<pre><code class="r">b &lt;- list(1:4, c(3.25, 6.75, 8.175, 4.5), c(&quot;apples&quot;, &quot;bananas&quot;, &quot;oranges&quot;, &quot;pears&quot;))
b[2]  # returns a list
</code></pre>

<pre><code>## [[1]]
## [1] 3.250 6.750 8.175 4.500
</code></pre>

<pre><code class="r">str(b[2])
</code></pre>

<pre><code>## List of 1
##  $ : num [1:4] 3.25 6.75 8.18 4.5
</code></pre>

<pre><code class="r">b[[2]]  # returns numbers from list
</code></pre>

<pre><code>## [1] 3.250 6.750 8.175 4.500
</code></pre>

<pre><code class="r">str(b[[2]])
</code></pre>

<pre><code>##  num [1:4] 3.25 6.75 8.18 4.5
</code></pre>

</section>
<section class='' data-state='' id='slide-116'>
  <h3>Data structures: 4. Lists</h3>
  <h4>List indexing</h4>

<pre><code class="r">b[1] * b[2]  # can&#39;t do arithmatic on lists
</code></pre>

<pre><code>## Error in b[1] * b[2]: non-numeric argument to binary operator
</code></pre>

<pre><code class="r">b[[1]] * b[[2]]  # can do arithmatic on numbers
</code></pre>

<pre><code>## [1]  3.250 13.500 24.525 18.000
</code></pre>

<ul>
<li>In order to reference a single list element directly, we have to use the double square bracket <code>[[ ]]</code> operator and the single bracket <code>[]</code> operator. </li>
</ul>

<pre><code class="r">b[[2]]  # 2nd element of list 
</code></pre>

<pre><code>## [1] 3.250 6.750 8.175 4.500
</code></pre>

<pre><code class="r">b[[2]][2]  # 2nd element of 2nd element of list 
</code></pre>

<pre><code>## [1] 6.75
</code></pre>

</section>
<section class='' data-state='' id='slide-117'>
  <h3>How do we save loop outputs?</h3>
  <ul>
<li>Instead of printing to the screen, we usually want to create a new object with the outputs on the loop.</li>
<li>To do this, you need to create a blank vector or list before the loop</li>
</ul>

<pre><code class="r">outputs &lt;- c()  # create a blank vector

x &lt;- rnorm(n = 10, mean = 1, sd = 0.5)  # vector that we will use in the loop

for (i in 1:length(x)) {
  outputs[i] &lt;- x[i] * 10
}
outputs
</code></pre>

<pre><code>##  [1]  6.029596 13.761718 10.922449 14.737241  6.798512  6.913397  1.505247
##  [8]  8.059382  7.972717  7.948766
</code></pre>

</section>
<section class='seventy' data-state='soothe' id='slide-118'>
  <h2>Try It!</h2>
  <p>First, create a vector, y, with 10 random samples from a standard normal distribution (mean = 0, sd = 1).</p>

<ol>
<li><p>Compute <code>y[i] * 2</code> for 10 iterations (the length of vector y) using a for loop with index i. Place the output in a <b>vector</b>.  </p></li>
<li><p>Compute <code>y[i] * 2</code> for 10 iterations using a for loop. Place the output in a <b>list</b>.</p></li>
<li><p>Find the the 4th element in the output vector from question 1 and the output list from question 2.</p></li>
<li><p>What do each of these loops do?  </p></li>
</ol>

<pre><code class="r">output &lt;- list()
for (x in 1:10) {
  output[x] &lt;- sum(x + x^2)
}

output2 &lt;- list()
for (x in 1:11) {
  output2[x + 1] &lt;- sum(x + x^2)
}
</code></pre>

</section>
<section class='' data-state='' id='slide-119'>
  <h2>Flow Statements</h2>
  <h3>if statements</h3>

<pre><code class="r">if (3 &gt; 2) {
  print(&quot;Yes&quot;)
}
</code></pre>

<pre><code>## [1] &quot;Yes&quot;
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-120'>
  <h2>Flow Statements</h2>
  <h3>if statements</h3>

<ul>
<li><p>Often, we want for loops to be able to do different things under different conditions. We want the for loop to account for variables, options, and logical statements.</p></li>
<li><p>Let&#39;s use an <b>if</b> statement:</p></li>
</ul>

<pre><code class="r">x &lt;- 1:5

for (i in 1:length(x)) {
  if (x[i] &gt; 3) {
    print(paste(x[i],&quot;is greater than 3&quot;))
  }
  if (x[i] &lt;= 3) {
    print(paste(x[i],&quot;is less than or equal to 3&quot;))
  }
}
</code></pre>

<pre><code>## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;4 is greater than 3&quot;
## [1] &quot;5 is greater than 3&quot;
</code></pre>

</section>
<section class='' data-state='' id='slide-121'>
  <h3>Flow Statements</h3>
  <h4>Controlling flow: else statements</h4>

<ul>
<li>If statements are often paired with else statements, used when we want to run specific code in a given case and the same code for every other possible case.<br></li>
</ul>

<pre><code class="r">x &lt;- rpois(100, lambda = 2)
output &lt;- c()

for (i in 1:length(x)) {
  if (x[i] == 0) {  # execute the code in this if statement in one special case
    next
  } else {  # for every other case, execute this code
    output[i] &lt;- x[i]^2
  }
}
output
</code></pre>

<pre><code>##   [1]   4   1   1   4  NA   4   9  49  16   4   1  16   4  NA   1  NA   4
##  [18]   4  NA  NA   4   1   4   1  NA   4   1   4  49   1  16   9  NA  16
##  [35]   4   9   4   4   9   9   4  25  NA   4   1   4   4   9   1   4   4
##  [52]  16   1   4   4 100   1   1  NA  NA   4   1   4   4  16   1  36   1
##  [69]   4   4  NA   4  NA   4  16  NA  36   4   9   4  NA   9   9   1   1
##  [86]   1   9   1  NA   9  25   4   4   9  NA  16  NA   1   1   9
</code></pre>

</section>
<section class='' data-state='' id='slide-122'>
  <h3>Flow Statements</h3>
  <h4>Controlling flow: break statements</h4>

<ul>
<li>Sometimes we want the loop to end if certain logical criteria are met. We can end a loop running based on an <b>if</b> and <b>break</b> statement</li>
</ul>

<pre><code class="r">for (i in 1:length(x)) {
  if (x[i] &gt; 3){
    break
    }
  if (x[i] &lt;= 3) {
    print(paste(x[i],&quot;is less than or equal to 3&quot;))
    }
}
</code></pre>

<pre><code>## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
</code></pre>

</section>
<section class='ninety' data-state='' id='slide-123'>
  <h3>Flow Statements</h3>
  <h4>Controlling flow: next statements</h4>

<ul>
<li><p>Sometimes we don&#39;t want to break the statement, just skip a troublesome object or R that we know will cause an error.  </p></li>
<li><p>We can continue within a loop based on an <b>if</b> and <b>next</b> statement. Here we want to skip 4. </p></li>
</ul>

<pre><code class="r">for (i in 1:length(x)) {
  if (x[i] == 4) {
    next
    }
  if (x[i] &gt; 3) {
    print(paste(x[i],&quot;is greater than 3&quot;))
    }
  if (x[i] &lt;= 3) {
    print(paste(x[i],&quot;is less than or equal to 3&quot;))
    }
  }
</code></pre>

<pre><code>## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;7 is greater than 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;7 is greater than 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;5 is greater than 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;10 is greater than 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;6 is greater than 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;6 is greater than 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;5 is greater than 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;0 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-124'>
  <h2>Try It!</h2>
  <p>First, create a vector, <code>x</code>, with all integers between 1 and 100.</p>

<ol>
<li><p>Create a for loop that computes <code>x[i] * 2</code> for 100 iterations (the length of vector <code>x</code>). Place the output in a vector. However, calculate <code>x[i] * 3</code> when <code>x[i] = 32</code>. </p></li>
<li><p>Create a for loop that computes <code>x[i] * 2</code> for 100 iterations. Place the output in a list. However, break the loop after 51 iterations.</p></li>
<li><p>Create a for loop that computes <code>x[i] * 2</code> for 100 iterations. Place the output in a vector. However, skip <code>x = 71, 74</code>.</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-125'>
  <h2>Alternatives to for loops: the apply family</h2>
  <p>The <i>apply</i> family of functions allows you to process whole rows, columns, or lists. This is called <b>vectorization</b>. This can replace for loops (and is often faster).</p>

</section>
<section class='' data-state='' id='slide-126'>
  <h2>apply()</h2>
  <ul>
<li><code>apply(matrixname, margin = c(1,2), function = FunctionName)</code></li>
<li><code>margin = 1</code> apply function to rows of matrix; <code>margin = 2</code> apply to columns of matrix; <code>margin = c(1,2)</code> apply to rows and columns of matrix</li>
<li><b><code>apply(M, 2, fun)</code></b> = apply <i>fun</i> to the columns of <i>M</i></li>
</ul>

</section>
<section class='' data-state='' id='slide-127'>
  <h2>apply()</h2>
  <ul>
<li>Use <code>apply()</code> to take the median of the rows/columns of matrix M.</li>
</ul>

<pre><code class="r">M &lt;- matrix(rnorm(9), ncol = 3, nrow = 3)
M
</code></pre>

<pre><code>##            [,1]         [,2]       [,3]
## [1,] -0.9195574 -0.003817313 -0.5123387
## [2,]  0.5537405  0.167823085 -0.3541061
## [3,]  1.0229264 -0.103687892 -0.4194641
</code></pre>

<pre><code class="r">apply(M, 1, median)  # median of rows 
</code></pre>

<pre><code>## [1] -0.5123387  0.1678231 -0.1036879
</code></pre>

<pre><code class="r">apply(M, 2, median)  # median of columns 
</code></pre>

<pre><code>## [1]  0.553740512 -0.003817313 -0.419464060
</code></pre>

</section>
<section class='' data-state='' id='slide-128'>
  <h2>apply()</h2>
  <ul>
<li>The same analysis, but using a for loop</li>
</ul>

<pre><code class="r">med.M &lt;- c()

for (i in 1:3) {
    med.M[i] &lt;- median(M[, i])
}

med.M
</code></pre>

<pre><code>## [1]  0.553740512 -0.003817313 -0.419464060
</code></pre>

</section>
<section class='' data-state='' id='slide-129'>
  <h2>The apply family</h2>
  <ul>
<li>Other versions of <code>apply()</code> for other data types:

<ul>
<li><code>lapply()</code></li>
<li><code>tapply()</code></li>
<li><code>sapply()</code></li>
<li><code>vapply()</code></li>
<li><code>mapply()</code></li>
</ul></li>
</ul>

</section>
<section class='' data-state='' id='slide-130'>
  <h2>The apply family</h2>
  <ul>
<li>Other versions of <code>apply()</code> are used for other data types. For example <code>lapply()</code> uses lists as input.</li>
</ul>

<pre><code class="r">mylist &lt;- list(1:3, c(1.4, 4.6, 4.2, 2.1), rnorm(4))  # make a list 
mylist
sum(mylist)  # returns an error 

lapply(mylist, sum)  # applies function to each element in the list
</code></pre>

</section>
<section class='' data-state='' id='slide-131'>
  <h2>Useful links</h2>
  <p><a href = "http://adv-r.had.co.nz/Subsetting.html" target = "_blank">Subsetting tutorial</a></p>

<p><a href = "http://blog.datacamp.com/tutorial-on-loops-in-r/" target = "_blank">Loops in R</a></p>

<p><a href = "http://www.r-bloggers.com/using-apply-sapply-lapply-in-r/" target = "_blank">Apply family in R</a></p>

</section>
<section class='' data-state='' id='slide-132'>
  <h2>Practice</h2>
  <p><a href = "https://rpubs.com/mccannecology/53355" target = "_blank">Worksheet</a></p>

<p><a href = "https://rpubs.com/mccannecology/53361" target = "_blank">Answers</a></p>

</section>
<section class='' data-state='' id='slide-133'>
  <h2><b>Part 5:</b> Functions</h2>
  <h5><a href = "#/1"> Back to the directory </a></h5>

</section>
<section class='' data-state='' id='slide-134'>
  <h2>Functions in R: Base</h2>
  <ul>
<li><p>Functions contain sets of instructions that we want to carry out repeatedly</p></li>
<li><p>We have already seen many of the basic functions that come pre-installed with R.</p></li>
</ul>

<pre><code class="r">sum(seq(1, 100, 1))
abs(-100 + 50)
dim(iris)
str(iris)
colnames(iris)
</code></pre>

</section>
<section class='' data-state='' id='slide-135'>
  <h2>Functions in R: Packages</h2>
  <ul>
<li>We have also seen functions that are loaded from packages. </li>
</ul>

<pre><code class="r"># this will not run. tree is not loaded 
tree(formula = Species ~ . -Species, data = iris) 

install.packages(&quot;tree&quot;)  # install package 
library(tree)  # load package 

# now it should work 
tree(formula = Species ~ . -Species, data = iris)
</code></pre>

</section>
<section class='' data-state='' id='slide-136'>
  <h2>Functions in R: Make your own!</h2>
  <p>It is also possible to <i>define your own functions</i>. This is especially important if you are going to write the same lines of code over and over again. </p>

<ul>
<li>R functions are objects just like anything else.</li>
<li>By default, R function arguments are lazy, i.e. they&#39;re only evaluated if they&#39;re actually used.</li>
<li>Every call on a R object is almost always a function call.</li>
</ul>

</section>
<section class='' data-state='' id='slide-137'>
  <h2>Basic components of a function</h2>
  <ul>
<li>The <i><code>body()</code></i>, the code inside the function.</li>
<li>The <i><code>formals()</code></i>, the &quot;formal&quot; argument list, which controls how you can call the function.</li>
<li>The <i><code>environment()</code></i>, which determines how variables referred to inside the function are found.</li>
<li><i><code>args()</code></i> to list arguments. </li>
</ul>

</section>
<section class='' data-state='' id='slide-138'>
  <h2>Writing functions</h2>
  <p><code>FunctionName &lt;- function(arguments) {body}</code></p>

<pre><code class="r"># define a function, f
f &lt;- function(x, y) {
  x + y
}

# call function f
f(x = 1, y = 3) 
</code></pre>

<pre><code>## [1] 4
</code></pre>

</section>
<section class='seventy' data-state='' id='slide-139'>
  <h3>Functions and the environment</h3>
  <ul>
<li><p>Variables defined inside functions exist in a different <b>environment</b> than the global environment, i.e. they don&#39;t exist outside of the function.</p></li>
<li><p>However, if a variable is not defined inside a function, the function will look one level above.</p></li>
<li><p>If you run this function, you&#39;ll see that <code>y</code> does not pop up in your environment panel.</p></li>
</ul>

<pre><code class="r">x &lt;- 2  # variable defined outside the function

g &lt;- function() {
    y &lt;- 1  # variable defined inside the function 
    c(x, y) 
}

g()  # function g looks for x one level above (in global environment)
</code></pre>

<pre><code>## [1] 2 1
</code></pre>

</section>
<section class='eighty' data-state='' id='slide-140'>
  <h3>Function basics</h3>
  <ul>
<li>Unless you use the function <code>return()</code> or write the output at the end of the function, you won&#39;t be able to access the output</li>
</ul>

<pre><code class="r">f1 &lt;- function(a, b) {
    x &lt;- a + b 
    y &lt;- (a + b)^2
    z &lt;- a/b
}

f1(1, 2)  # doesn&#39;t return anything

f2 &lt;- function(a, b) {
    x &lt;- a + b 
    y &lt;- (a + b)^2
    z &lt;- a/b
    c(x, y, z)  # same result as writing return(c(x, y, z))
}

f2(1, 2)  # returns x, y, and z
</code></pre>

<pre><code>## [1] 3.0 9.0 0.5
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-141'>
  <h2>Try It!</h2>
  <ol>
<li><p>Create a function that takes in two arguments, <code>x</code> and <code>y</code>, and computes <code>x * 2 * y</code>.</p></li>
<li><p>Create a function that takes in three arguments, and makes a vector from the result.</p></li>
<li><p>Create a function that counts the number of matching elements in two separate vectors. <b>Hint:</b> use <code>%in%</code> to create a logical statement.</p></li>
</ol>

</section>
<section class='' data-state='' id='slide-142'>
  <h3>Function basics</h3>
  <ul>
<li>Arguments can be passed to a function as a vector or a list</li>
</ul>

<pre><code class="r">params &lt;- c(5, 25)
params
</code></pre>

<pre><code>## [1]  5 25
</code></pre>

<pre><code class="r">f3 &lt;- function(p) {
    alpha &lt;- p[1]
    beta &lt;- p[2]
    alpha * beta
}

f3(params)
</code></pre>

<pre><code>## [1] 125
</code></pre>

</section>
<section class='' data-state='' id='slide-143'>
  <h3>Functions with pre-defined values</h3>
  <pre><code class="r">subtract &lt;- function(a = 5, b = 2) {
    return(a - b)
}

subtract()
</code></pre>

<pre><code>## [1] 3
</code></pre>

<pre><code class="r">subtract(3, 6)
</code></pre>

<pre><code>## [1] -3
</code></pre>

</section>
<section class='' data-state='soothe' id='slide-144'>
  <h2>Try It!</h2>
  <ol>
<li><p>Write a function that takes a vector as an argument and multiplies the sum of the vector by 10. Return a logical statement based on whether the sum is under 1000.</p></li>
<li><p>Write a function that calculates the mean of every column in a dataframe. Code the function so that it does not evaluate the column mean if the column elements are not numbers, using <b><code>class(x) != &quot;numeric&quot;</code></b>. Try your function on the <code>iris</code> dataset.</p></li>
</ol>

</section>
<section class='' data-state='soothe' id='slide-145'>
  <h2>Try It!</h2>
  <pre><code class="r">f4 &lt;- function(x) {
  output &lt;- c()
  for (i in 1:ncol(x)) {
    if(class(x[, i]) != &quot;numeric&quot;) {
      output[i] &lt;- NA
    }
    if(class(x[, i]) == &quot;numeric&quot;) {
      output[i] &lt;- mean(x[, i])
    }
  }
  names(output) &lt;- colnames(x)
  return(output)
}
f4(iris)
</code></pre>

<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species 
##     5.843333     3.057333     3.758000     1.199333           NA
</code></pre>

</section>
<section class='' data-state='' id='slide-146'>
  <h2>Helpful links</h2>
  <p><a href = "http://blog.datacamp.com/functions-in-r-a-tutorial/" target = "_blank">Tutorial on using functions in R</a></p>

<p><a href = "http://adv-r.had.co.nz/Functions.html" target = "_blank">Advanced R - Functions</a></p>

</section>
<section class='' data-state='' id='slide-147'>
  <h2>Practice</h2>
  <p><a href = "https://rpubs.com/mccannecology/53356" target = "_blank">Worksheet</a></p>

<p><a href = "https://rpubs.com/mccannecology/53362" target = "_blank">Answers</a></p>

</section>
<section class='' data-state='' id='slide-148'>
  <h2><b>Part 6:</b> Data visualization using <code>ggplot2</code></h2>
  <h5><a href = "#/1"> Back to the directory </a></h5>

</section>
<section class='' data-state='blackout' id='slide-149'>
  <h2>Review</h2>
  <p><code>ggplot2</code> is not a base package, so we need to install it.</p>

<ol>
<li><p>How would you install the package <code>ggplot2</code>?</p></li>
<li><p>What is the next step before you can use a function from <code>ggplot2</code>? </p></li>
</ol>

</section>
<section class='' data-state='' id='slide-150'>
  <h2>Install and load <code>ggplot2</code></h2>
  <pre><code class="r">install.packages(&quot;ggplot2&quot;)
library(ggplot2)
</code></pre>

</section>
<section class='' data-state='' id='slide-151'>
  <h2>Why <code>ggplot2</code>?</h2>
  <ul>
<li>The way you write code in <code>ggplot2</code> makes a lot more sense compared to base graphics</li>
<li>Easier to create visually appealing figures </li>
<li>Useful for exploring trends in your data</li>
</ul>

</section>
<section class='' data-state='noborder' id='slide-152'>
  <h4>Why <code>ggplot2</code>?</h4>
  <pre><code class="r">plot(x = iris$Species, y = iris$Sepal.Length)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-95-1.png" alt="plot of chunk unnamed-chunk-95"></p>

<pre><code class="r">library(ggplot2)
ggplot(data = iris, aes(x = Species, y = Sepal.Length)) + geom_boxplot() + theme_classic()
</code></pre>

<p><img src="assets/fig/unnamed-chunk-95-2.png" alt="plot of chunk unnamed-chunk-95"></p>

</section>
<section class='' data-state='noborder' id='slide-153'>
  <h2>Why gg?</h2>
  <ul>
<li><p><code>gg</code> stands for &quot;grammar of graphics&quot;</p></li>
<li><p>Uses a set of terms that defines the basic components of (every) plot</p></li>
<li><p>Produce figures using coherent, consistent syntax (very similar code for very different figures)</p>

<ul>
<li>However, this syntax does vary quite a bit from typical R syntax!</li>
<li>If you are a little confused by the syntax at first, that probably just means that you are getting more comfortable with the R language</li>
</ul></li>
</ul>

</section>
<section class='' data-state='' id='slide-154'>
  <h2>The grammar</h2>
  <ul>
<li>A basic <code>ggplot2</code> plot consists of:

<ul>
<li><code>data</code>: Must be a <b>data frame</b></li>
<li><code>aes</code>(thetics): How your data are represented visually <i>(x, y, color, size, shape, etc.)</i></li>
<li><code>geom</code>(etry): What type of geometric objects you want to display <i>(points, lines, polygons, etc.)</i></li>
</ul></li>
</ul>

</section>
<section class='' data-state='noborder' id='slide-155'>
  <h2>A basic plot</h2>
  <pre><code class="r">library(ggplot2)
ggplot(data = iris, aes(x = Sepal.Length, y = Sepal.Width)) + geom_point()
</code></pre>

<p><img src="assets/fig/unnamed-chunk-96-1.png" alt="plot of chunk unnamed-chunk-96"></p>

</section>
<section class='eighty' data-state='noborder' id='slide-156'>
  <h3>Plots can be assembled in pieces</h3>
  <ul>
<li><p>Useful for exploring data in different ways</p></li>
<li><p>I&#39;ll be using variables from the <code>state.x77</code> and <code>state.region</code> datasets (US state data from 1977)</p></li>
</ul>

<pre><code class="r">state &lt;- data.frame(state.x77, state.region, state.abb)
stateplot &lt;- ggplot(data = state, aes(x = Population, y = Area))
stateplot + geom_point()
</code></pre>

<p><img src="assets/fig/unnamed-chunk-97-1.png" alt="plot of chunk unnamed-chunk-97"></p>

</section>
<section class='' data-state='noborder' id='slide-157'>
  <h2>Aesthetics</h2>
  <p>Increase the size of points (<code>size</code> argument within <code>geom_point()</code>)</p>

<pre><code class="r">ggplot(data = state, aes(x = Population, y = Area)) + geom_point(size = 3)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-98-1.png" alt="plot of chunk unnamed-chunk-98"></p>

</section>
<section class='' data-state='noborder' id='slide-158'>
  <h2>Aesthetics</h2>
  <ul>
<li>Differentiate state region by <b>color</b> (<code>color</code> argument within <code>aes()</code>)</li>
</ul>

<pre><code class="r">ggplot(data = state, aes(x = Illiteracy, y = Murder, color = state.region)) + geom_point(size = 2)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-99-1.png" alt="plot of chunk unnamed-chunk-99"></p>

</section>
<section class='' data-state='noborder' id='slide-159'>
  <h2>Aesthetics</h2>
  <ul>
<li>Differentiate state region by <b>color</b> and <b>shape</b> (<code>shape</code> argument within <code>aes()</code>)</li>
</ul>

<pre><code class="r">ggplot(data = state, aes(x = Life.Exp, y = HS.Grad, color = state.region, shape = state.region)) + geom_point(size = 2)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-100-1.png" alt="plot of chunk unnamed-chunk-100"></p>

</section>
<section class='' data-state='soothe' id='slide-160'>
  <h2>Try It!</h2>
  <ul>
<li>Take a sample from the <code>diamonds</code> dataset</li>
</ul>

<pre><code class="r">d2 &lt;- diamonds[sample(1:nrow(diamonds), 1000), ]
</code></pre>

<ul>
<li>Then generate this plot:</li>
</ul>

<p><img src="assets/fig/unnamed-chunk-102-1.png" alt="plot of chunk unnamed-chunk-102"></p>

</section>
<section class='' data-state='noborder' id='slide-161'>
  <h2>Other geometric objects</h2>
  <p>Type <code>geom_</code> and hit tab to see them all. Then, use <code>?geom_nameofgeom</code> to see the help screen.</p>

</section>
<section class='' data-state='noborder' id='slide-162'>
  <h2>Other geometric objects</h2>
  <h4>Boxplot</h4>

<pre><code class="r">ggplot(iris, aes(x = Species,y = Sepal.Length)) + geom_boxplot()
</code></pre>

<p><img src="assets/fig/unnamed-chunk-103-1.png" alt="plot of chunk unnamed-chunk-103"></p>

</section>
<section class='' data-state='noborder' id='slide-163'>
  <h2>Other geometric objects</h2>
  <h4>Histograms</h4>

<ul>
<li>Change some of the aesthetics - <code>binwidth</code>, <code>fill</code></li>
</ul>

<pre><code class="r">ggplot(faithful, aes(x = waiting)) + geom_histogram(binwidth = 8, color = &quot;black&quot;, fill = &quot;paleturquoise&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-104-1.png" alt="plot of chunk unnamed-chunk-104"></p>

</section>
<section class='' data-state='noborder' id='slide-164'>
  <h2>Other geometric objects</h2>
  <h4>Bar plots</h4>

<pre><code class="r">ggplot(iris, aes(x = Species, y = Sepal.Length)) + geom_bar(stat = &quot;identity&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-105-1.png" alt="plot of chunk unnamed-chunk-105"></p>

</section>
<section class='' data-state='noborder' id='slide-165'>
  <h2>Other geometric objects</h2>
  <h4>Line plots</h4>

<pre><code class="r">ggplot(mtcars, aes(x = wt, y = mpg, color = as.factor(cyl))) + geom_line()
</code></pre>

<p><img src="assets/fig/unnamed-chunk-106-1.png" alt="plot of chunk unnamed-chunk-106"></p>

</section>
<section class='' data-state='noborder' id='slide-166'>
  <h2>Other geometric objects</h2>
  <h4>Density plots</h4>

<pre><code class="r">ggplot(faithful, aes(waiting)) + geom_density(fill = &quot;thistle&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-107-1.png" alt="plot of chunk unnamed-chunk-107"></p>

</section>
<section class='' data-state='soothe' id='slide-167'>
  <h2>Try It!</h2>
  <ol>
<li><p>Look up <code>geom_histogram</code>. What does it do?</p></li>
<li><p>Make a histogram of <code>Sepal.Length</code> from the <code>iris</code> data set. What did it do with the different species?</p></li>
</ol>

</section>
<section class='' data-state='noborder' id='slide-168'>
  <h2>Facets</h2>
  <p>Plots can also have <b>facets</b>, which divide a plot into subplots based on some discrete variable (here, species). Syntax is <code>facet_grid(Species ~ .)</code>, where there are as many rows as species and there is only one column (represented by the period).</p>

<pre><code class="r">ggplot(iris, aes(Sepal.Length)) + geom_histogram() + facet_grid(Species ~ .)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-108-1.png" alt="plot of chunk unnamed-chunk-108"></p>

</section>
<section class='' data-state='noborder' id='slide-169'>
  <h2>Facets</h2>
  <p>Change to <code>facet_grid(. ~ Species)</code> and get one row, three columns.</p>

<pre><code class="r">ggplot(iris, aes(Sepal.Length)) + geom_histogram() + facet_grid(. ~ Species)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-109-1.png" alt="plot of chunk unnamed-chunk-109"></p>

</section>
<section class='' data-state='noborder' id='slide-170'>
  <h2>Stats</h2>
  <p>Type <code>stat_</code> and hit tab to see them all. Then, use <code>?stat_nameofstat</code> to see the help screen.</p>

</section>
<section class='' data-state='noborder' id='slide-171'>
  <h2>Stats</h2>
  <p>Use <code>stat_smooth</code> to add a linear fit</p>

<pre><code class="r">ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Species)) + geom_point() + stat_smooth(method = &quot;lm&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-110-1.png" alt="plot of chunk unnamed-chunk-110"></p>

</section>
<section class='' data-state='noborder' id='slide-172'>
  <h2>Scales</h2>
  <ul>
<li><p><code>scales</code> are used to modify axes and colors </p></li>
<li><p>For example: </p>

<ul>
<li><code>scale_y_continuous()</code> Set name, breaks, labels, limits of y-axis </li>
<li><code>scale_x_log10()</code> log transform the x-axis </li>
<li><code>scale_colour_manual()</code> Specify colors for geoms </li>
<li><code>scale_fill_discrete()</code> Specify colors for geoms </li>
</ul></li>
</ul>

</section>
<section class='' data-state='noborder' id='slide-173'>
  <h2>Scales</h2>
  <ul>
<li>log x and log y axes, <code>+ scale_x_log10()</code> and <code>+ scale_y_log10()</code></li>
</ul>

<pre><code class="r">ggplot(data = state, aes(x = Population, y = Area, color = state.region)) + scale_y_log10() + scale_x_log10() + geom_point()
</code></pre>

<p><img src="assets/fig/unnamed-chunk-111-1.png" alt="plot of chunk unnamed-chunk-111"></p>

</section>
<section class='' data-state='noborder' id='slide-174'>
  <h2>Scales</h2>
  <ul>
<li>Add color manually using <code>+ scale_colour_manual()</code></li>
</ul>

<pre><code class="r">ggplot(data = state, aes(x = Population, y = Area, color = state.region)) + scale_y_log10() + scale_x_log10() + geom_point() + scale_colour_manual(values = c(&quot;palegreen3&quot;,&quot;palevioletred3&quot;,&quot;peachpuff3&quot;, &quot;paleturquoise3&quot;))
</code></pre>

<p><img src="assets/fig/unnamed-chunk-112-1.png" alt="plot of chunk unnamed-chunk-112"></p>

</section>
<section class='' data-state='noborder' id='slide-175'>
  <h2>Labels</h2>
  <ul>
<li>Add labels, including a title and x and y axes labels, using <code>+ labs()</code></li>
</ul>

<pre><code class="r">ggplot(data = state, aes(x = Life.Exp, y = HS.Grad, color = state.region, shape = state.region)) + geom_point(size = 2) + labs(title = &quot;US States, 1977&quot;, x = &quot;Life expectancy (in years)&quot;, y = &quot;High school graduation rate (percent)&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-113-1.png" alt="plot of chunk unnamed-chunk-113"></p>

</section>
<section class='' data-state='noborder' id='slide-176'>
  <h2>Labels</h2>
  <ul>
<li>Add labels inside the figure using <code>+ geom_text()</code></li>
</ul>

<pre><code class="r">ggplot(data = state, aes(x = Life.Exp, y = HS.Grad, color = state.region, shape = state.region)) + geom_point(size = 2) + labs(title = &quot;US States, 1977&quot;, x = &quot;Life expectancy (in years)&quot;, y = &quot;High school graduation rate (percent)&quot;) + geom_text(aes(label = state.abb, size = 2, hjust = 0, vjust = 0))
</code></pre>

<p><img src="assets/fig/unnamed-chunk-114-1.png" alt="plot of chunk unnamed-chunk-114"></p>

</section>
<section class='ninety' data-state='noborder' id='slide-177'>
  <h2>Themes</h2>
  <ul>
<li><p>Control over the figure as a whole can be done by modifying <b>themes</b>. See <code>?theme</code> for all of the options </p></li>
<li><p>I prefer <code>+ theme_bw()</code> (white background with gridlines) or <code>+ theme_classic()</code> (white background without gridlines)</p></li>
<li><p>You can also change the overall font family and font size</p></li>
</ul>

<pre><code class="r">ggplot(iris, aes(Species, Sepal.Length)) + geom_bar(stat = &quot;identity&quot;) + theme_classic(base_family = &quot;Helvetica&quot;, base_size = 14)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-115-1.png" alt="plot of chunk unnamed-chunk-115"></p>

</section>
<section class='' data-state='noborder' id='slide-178'>
  <h2>Saving plots</h2>
  <pre><code class="r">my_plot &lt;- ggplot(iris, aes(Species, Sepal.Length)) + geom_bar(stat = &quot;identity&quot;) + theme_bw()

ggsave(&quot;my_plot.jpg&quot;, my_plot, height = 4, width = 4, units = &quot;in&quot;)
</code></pre>

<p>You can specify the file name, dimensions, resolution, etc. </p>

<p><b>Note:</b> Saved in your current working directory (unless specified).</p>

</section>
<section class='' data-state='alert' id='slide-179'>
  <h2>R Tip: ggplot2 takes data frames only</h2>
  <p><b>Data structure must be a data frame to plot with ggplot2</b></p>

<pre><code class="r">xvar &lt;- rnorm(100)
yvar &lt;- rnorm(100)
df &lt;- data.frame(xvar, yvar)  # coerce to data frame 
ggplot(df, aes(xvar, yvar)) + geom_point()
</code></pre>

<p><img src="assets/fig/unnamed-chunk-117-1.png" alt="plot of chunk unnamed-chunk-117"></p>

</section>
<section class='' data-state='soothe' id='slide-180'>
  <h2>Try It!</h2>
  <ol>
<li><p>Type in <code>data(package = &quot;datasets&quot;)</code> to see all of the datasets pre-installed with R. </p></li>
<li><p>Find some data that interests you (or use your own) and examine its structure. Are they vectors, data frames, other? How many observations are there? </p></li>
<li><p>Use <code>ggplot2</code> to make a plot of some attribute of the data. </p></li>
</ol>

</section>
<section class='' data-state='noborder' id='slide-181'>
  <h2>Proper data formatting</h2>
  <ul>
<li>Often our data looks like this (&quot;<b>wide</b>&quot;), where multiple observations can be found in each row</li>
</ul>

<pre><code class="r">head(df)
</code></pre>

<pre><code>##        spA      spB      spC      spD
## 1 49.10396 68.27981 20.60649 25.39428
## 2 48.64058 74.72528 19.87461 25.42307
## 3 50.51679 74.40623 20.62008 25.50169
## 4 49.02538 77.22343 19.37961 24.08362
## 5 51.44201 67.03794 19.71196 23.91932
## 6 50.83038 74.95657 19.92310 25.78173
</code></pre>

<pre><code class="r">dim(df)
</code></pre>

<pre><code>## [1] 100   4
</code></pre>

</section>
<section class='' data-state='noborder' id='slide-182'>
  <h2>Proper data formatting</h2>
  <ul>
<li>Data is much easier to analyze visually and statisically if it looks like this (&quot;<b>long</b>&quot;), where there is one row per observation</li>
</ul>

<pre><code class="r">head(df2)
</code></pre>

<pre><code>##   species   weight
## 1       A 76.16731
## 2       B 72.32543
## 3       C 77.33441
## 4       D 76.44599
## 5       A 82.26476
## 6       B 73.12404
</code></pre>

<pre><code class="r">dim(df2)
</code></pre>

<pre><code>## [1] 400   2
</code></pre>

</section>
<section class='' data-state='noborder' id='slide-183'>
  <h3>Melting: from wide to long</h3>
  <pre><code class="r"># make some fake &quot;wide&quot; data
df &lt;- data.frame(A = rnorm(100, 50, 6), B = rnorm(100, 75, 5), C = rnorm(100, 50, 4), D = rnorm(100, 55, 3))
head(df)
</code></pre>

<pre><code>##          A        B        C        D
## 1 50.73795 71.54831 56.72058 55.50035
## 2 54.38796 76.96641 50.84828 54.08178
## 3 38.34681 75.33919 51.58912 54.43482
## 4 53.64221 75.24042 47.13779 55.63801
## 5 46.89473 70.01894 44.45489 51.73413
## 6 57.43555 68.72379 51.50239 53.52847
</code></pre>

</section>
<section class='' data-state='noborder' id='slide-184'>
  <h3>Melting: from wide to long</h3>
  <ul>
<li>Use the <code>melt()</code> function in <code>reshape2</code> package</li>
</ul>

<pre><code class="r">library(reshape2)
df2 &lt;- melt(data = df)
</code></pre>

<pre><code>## No id variables; using all as measure variables
</code></pre>

<pre><code class="r">head(df2)
</code></pre>

<pre><code>##   variable    value
## 1        A 50.73795
## 2        A 54.38796
## 3        A 38.34681
## 4        A 53.64221
## 5        A 46.89473
## 6        A 57.43555
</code></pre>

<pre><code class="r">dim(df2)
</code></pre>

<pre><code>## [1] 400   2
</code></pre>

</section>
<section class='' data-state='noborder' id='slide-185'>
  <h2>Melting: from wide to long</h2>
  <ul>
<li>Melting the data makes it easier to plot</li>
</ul>

<pre><code class="r">ggplot(df2, aes(x = value)) + geom_histogram() + facet_grid(. ~ variable)
</code></pre>

<pre><code>FALSE `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
</code></pre>

<p><img src="assets/fig/unnamed-chunk-124-1.png" alt="plot of chunk unnamed-chunk-124"></p>

</section>
<section class='' data-state='noborder' id='slide-186'>
  <h2>Helpful links</h2>
  <p><a href = "http://docs.ggplot2.org/current/" target = "_blank">ggplot2 documentation</a></p>

<p><a href = "http://ggplot2.org/resources/2007-vanderbilt.pdf" target = "_blank">Presentation by Hadley Wickham about ggplot2</a></p>

<p><a href = "https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" target = "_blank">ggplot Cheat Sheet</a></p>

<p><a href = "http://colorbrewer2.org" target = "_blank">R ColorBrewer</a></p>

<p><a href = "http://rpubs.com/mccannecology/47829" target = "_blank">Plotting means and error bars</a></p>

<p><a href = "http://www.cookbook-r.com/Graphs/" target = "_blank">R Cookbook: Graphs</a></p>

</section>
<section class='' data-state='' id='slide-187'>
  <h2>Practice</h2>
  <p><a href = "https://rpubs.com/mccannecology/53357" target = "_blank">Worksheet</a></p>

<p><a href = "https://rpubs.com/mccannecology/53363" target = "_blank">Answers</a></p>

</section>
<section class='ninety' data-state='' id='slide-188'>
  <h2>Additional topics and links</h2>
  <ul>
<li>When you get a bit more comfortable with R, I recommend taking a look at the additional material on Mike McCann&#39;s website.</li>
</ul>

<p><a href = "http://rpubs.com/mccannecology/53465" target = "_blank">Reproducible Research with RMarkdown</a></p>

<p><a href = "https://rpubs.com/mccannecology/54011" target = "_blank">Advanced Data Manipulation with dplyr</a></p>

<ul>
<li>I also recommend creating a GitHub account (where I&#39;ve uploaded this course). GitHub is used for making code freely available as well as for version control (important for collaborating on projects)</li>
</ul>

<p><a href = "http://www.github.com" target = "_blank">GitHub</a></p>

<p><a href = "http://jonlefcheck.net/2013/11/04/a-basic-tutorial-to-version-control-using-git/" target = "_blank">Basic tutorial on using GitHub (with RStudio)</a></p>

<p><a href = "https://try.github.io" target = "_blank">GitHub tutorial (using command line)</a></p>

<h5><a href = "#/1"> Back to the directory </a></h5>

</section>
    </div>
  </div>
</body>
  <script src="libraries/frameworks/revealjs/lib/js/head.min.js"></script>
  <script src="libraries/frameworks/revealjs/js/reveal.min.js"></script>
  <script>
  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,
    theme: Reveal.getQueryHash().theme || 'serif', 
    transition: Reveal.getQueryHash().transition || 'fade', 
    dependencies: [
    // Cross-browser shim that fully implements classList -
    // https://github.com/eligrey/classList.js/
      { src: 'libraries/frameworks/revealjs/lib/js/classList.js', condition: function() { return !document.body.classList;}},
      // Zoom in and out with Alt+click
      { src: 'libraries/frameworks/revealjs/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      // Speaker notes
      { src: 'libraries/frameworks/revealjs/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
      // Remote control your reveal.js presentation using a touch device
      //{ src: 'libraries/frameworks/revealjs/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
  });
  </script>  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script> -->
<script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
 

</html>